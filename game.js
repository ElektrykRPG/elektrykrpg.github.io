(function() {
function isEmpty(e){if(null==e)return!0;if(0<e.length)return!1;if(0===e.length)return!0;if("object"!=typeof e)return!0;for(var a in e)if(hasOwnProperty.call(e,a))return!1;return!0}var gameVersion="Beta 1.1.1",shootTime=0,saveTimer=0,playerSpeed=290,defaultSpeed=290,jumpTimer=0,turns=1,dmgMul=1,dmgRed=1,inChat=!1,betweenMapChange=!1,tw=!1,map,controls,lechuHead,lowerMenu,lechu,fpsText,layer,player,respawn,nuts,text,textgrp,middleweapontext,hpgrp,enemi,enHP,enemyHP,enemyName,enDMG,inFight,menu,kolba,renatka=!1,hptext,lvltext,hasOwnProperty=Object.prototype.hasOwnProperty;Storage.prototype.setObject=function(e,a){this.setItem(e,JSON.stringify(a))},Storage.prototype.getObject=function(e){var a=this.getItem(e);return a&&JSON.parse(a)};var weapons={piesc:{name:"Piesc",dmg:5,key:"piesc"},plastikowynozhayati:{name:"Plastikowy noz Hayati",dmg:10,key:"plastikowynozhayati"},plastikowynozbodrum:{name:"Plastikowy noz Bodrum",dmg:10,key:"plastikowynozbodrum"},papieroweshurikeny:{name:"Papierowe shurikeny",dmg:17,key:"papieroweshurikeny"},zaostrzonalinijka:{name:"Zaostrzona linijka",dmg:23,key:"zaostrzonalinijka"},nozcygana:{name:"Noz od cygana",dmg:25,key:"nozcygana"},maczeta:{name:"Maczeta do kebabow",dmg:30,key:"maczeta"},ukryteostrze:{name:"Ukryte ostrze",dmg:30,key:"ukryteostrze"},jedynka:{name:"Jedynka trygonometryczna",dmg:40,key:"jedynka"},pantadeusz:{name:"Pan Tadeusz",dmg:99999999999999,key:"pantadeusz"}},items={malapita:{name:"Mala pita",key:"malapita",type:"heal",soldIn:"hayati",heal:15,cost:8,amount:1,lechu:!0},duzapita:{name:"Duza pita",key:"duzapita",type:"heal",soldIn:"hayati",heal:30,cost:14,amount:1,lechu:!0},malykapsalon:{name:"Maly kapsalon",key:"malykapsalon",type:"heal",soldIn:"hayati",heal:40,cost:17,amount:1},pitaxxl:{name:"Pita XXL",type:"heal",key:"pitaxxl",soldIn:"hayati",heal:50,cost:21,amount:1,lechu:!0},bulka:{name:"Bulka",type:"heal",key:"bulka",soldIn:"bodrum",heal:20,cost:9,amount:1,lechu:!0},tortilla:{name:"Tortilla",type:"heal",key:"tortilla",soldIn:"bodrum",heal:35,cost:15,amount:1,lechu:!0},kubek:{name:"Kubek XXL",type:"heal",key:"kubek",soldIn:"bodrum",heal:50,cost:21,amount:1},iso:{name:"ISO Light",type:"heal",key:"iso",soldIn:"automat",heal:6,cost:3,amount:1},wodasmakowa:{name:"Woda smakowa",type:"heal",key:"wodasmakowa",soldIn:"automat",heal:4,cost:2,amount:1},kapuczino:{name:"Kapuczino",type:"heal",key:"kapuczino",soldIn:"kawa",heal:10,cost:5,amount:1},meta:{name:"Metamfetamina",type:"speedboost",key:"meta",soldIn:"justyna",cost:20,amount:1},kebabina:{name:"Kebabina",type:"dmgboost",key:"kebabina",soldIn:"justyna",cost:11,amount:1},heroina:{name:"Heroina",type:"dmgreduction",key:"heroina",soldIn:"justyna",cost:15,amount:1}},itemsEffects={meta:{desc:"2 razy wieksza szybkosc, 2 ataki w turze, trwa 20 sekund",effect:function(){playerSpeed<420&&(defaultSpeed*=2,playerSpeed=defaultSpeed,turns=2,setTimeout(function(){defaultSpeed/=2,playerSpeed=defaultSpeed,turns=1},2e4))}},kebabina:{desc:"Kokaina z kebabem - zwieksza obrazenia o 70%, 20 sekund",effect:function(){dmgMul<1.7&&(dmgMul=1.7,setTimeout(function(){dmgMul=1},2e4))}},heroina:{desc:"Zmniejsza otrzymywane obrazenia o 50%, trwa 30 sekund",effect:function(){dmgRed>=1&&(dmgRed=.5,setTimeout(function(){dmgRed=1},3e4))}}},quotes={lechu:{start:["Jeszcze w szkole? Juz dawno po dzwonku. Dobra dziecko, idz juz do domu.","Chociaz czekaj... Ty pierwszak jestes? Trzeba cie zaznajomic z radomszczanskimi realiami.","Radomskiem rzadza dwa kartele kebabowe: Bodrum Kebab i Hayati Kebab. Hayati probuje pokonac konkurencje, a Bodrum  - wedlug poglosek - potajemnie rzadzi calym miastem","Ja to tam takich rzeczy nie jem, ale dzieciaki w elektryku aktywnie walcza w tych frakcjach. Tylko nie mow nikomu, ze ci powiedzialem o potedze Bodruma. Jesli faktycznie maja takie wplywy, to jeszcze mnie odstrzela.","Jesli chcesz przetrwac w tej szkole, musisz do ktorejs z frakcji dolaczyc. Zmykaj juz... Chociaz w sumie jak juz bedziesz w kebabiarni, to mi mozesz kupic kebsa. Masz tu 10zl na start."],bringKebab:["O, dzieki! Jednak przyniosles tego kebsa. Dawaj mi no tu go, dziecko."],afterJoiningFaction:["Widze, ze tez zaczales sie bawic w kebabowego wojownika.","Kraza o tobie rozne wiesci po szkole. Szybko zdobywasz popularnosc.","Nie wiem co tam przeskrobales dziecko, ale nawet dyrektor sie toba zainteresowal. Szukal cie dzisiaj po szkole. Powinienes do niego pojsc."]},szefowa:{start:["Witamy. Wygladasz na ucznia Elektryka. Ostatnio wielu ludzi w twoim wieku przychodzi walczyc dla Hayati Kebab.","Radomsko jest w stanie wojny kebabowej. Potrzebujemy osob takich jak ty, aby zwalczyc konkurencje.","Jestesmy nowi, ale szybko udalo nam sie wbic na rynek. Ludzie maja dosc dominacji Bodruma, ktory w swojej kieszeni ma wszystkie organy miasta.","Z twoja pomoca mozemy wspolnie zniszczyc Bodruma raz na zawsze. Dolaczysz sie?"],after1:["Swietnie! Udalo ci sie zwerbowac dwoch nowych uczniow do walki z Bodrumem.","Jesli uda nam sie powiekszac nasza armie w takim tempie, to Bodrum nie bedzie mial z nami szans.","A jesli o Bodrumie mowa - jeden z naszych agentow namierzyl ich informatora. Znajduje sie na drugim pietrze w Elektryku.","Jesli pozbedziemy sie informatora Bodruma, to znaczaco ograniczymy ich wplywy i pole dzialania. Elektryk bedzie nasz..."],after2:["Mam dobre wiesci - po pozbyciu sie informatora bodrumiarze sa spanikowani. Pokazalismy im, ze kazdy kto pracuje dla Bodruma jest od teraz zagrozony.","Dobrze sie spisales, kebabowy wojowniku. Teraz pozostaje nam poszerzanie naszej armii i czekanie na reakcje Bodruma. Jak bedziemy cie potrzebowac, to sie z toba skontaktujemy."],after3:["Dobrze ze jestes. Wlasnie mielismy zamiar sie z toba skontaktowac.","Nie jest dobrze. Jedna z najbardziej zasluzonych agentek Bodruma - pani Maria, zaczela niedawno wyjawniac tajemnice radomszczanskich karteli kebabowych.","Z jednej strony to dobra wiadomosc, bo uderzy bezposrednio w Bodruma. Z drugiej strony, podkopie to tez nasza dzialanosc...","Wyjscie jest tylko jedno. Musisz pokonac pania Marie. Znajduje sie w swojej sali matematycznej w Elektryku. Do tego zadania przyda ci sie nasza specjalna bron."],after4:["Zdazylismy juz uslyszec o twojej walce z pania Maria. Gratuluje, jestes naszym najlepszym wojownikiem.","Dzieki twoim dzialaniom i naszym innym agentom, udalo nam sie solidnie podkopac pozycje Bodruma i zgromadzic na terenie Radomska potezna armie.","Nasze wplywy rosna z godziny na godzine, a ludzie odwracaja sie od Bodruma. To najlepsza pora na ostateczny atak...","Czas raz na zawsze pokonac Bodruma i sprawic, by to wlasnie Hayati zostalo najwiekszym kartelem kebabowym w Radomsku. Odwiedz handlarza bronia w czerwonej przyczepie obok Gucia."],win:["Hayati wreszcie rzadzi calym Radomskiem...","Za twoj niepodwazalny wklad w nasze zwyciestwo, nalezy ci sie spora nagroda.","Gratuluje, kebabowy wojowniku, zwyciezylismy..."]},szef:{start:["O, mlody. Ty z Elektryka, tak?","Bodrum do niedawna kontrolowal cale Radomsko. Mielismy agentow we wszystkich organach miasta, rowniez w Elektryku.","W czasach swietnosci zaczelismy takze ekspansje na inne tereny Radomska. Lecz nasza nowa restauracja przy Baszcie sie nie przyjela...","Do miasta wkroczyla konkurencja, a my powoli tracilismy pienadze, kontrole i wplywy...","Nie zamierzamy sie jednak poddac. Musimy pokazac Hayati gdzie jest ich miejsce oraz odzyskac wladze nad miastem.","Wojna juz sie zaczela. Chcesz walczyc z nami ramie w ramie?"],after1:["No niezle, poradziles sobie. Teraz mamy wiecej ludzi do walki i wiecej pieniedzy. Tak trzymac!","Nie spodziewalem sie, ze tak latwo ci pojdzie. Drzemie w tobie moc POTEZNEGO kebabowego wojownika.","Jako dar uznania, przyjmij prosze 10zl.","Mam dla ciebie jednak kolejna sprawe. Nasze wtyki w ZNP z sasiedniego budynku przestali spelniac nasze zadania. Pokaz im, ze nie damy sie tak traktowac..."],after2:["Sprawa zalatwiona, jak rozumiem?","Swietnie. Teraz Bodrum musi dokonczyc infiltracje Elektryka. Troche to zajmie, wiec na razie nic dla ciebie nie mam. Gdziekolwiek jestes, werbuj ludzi do naszej armii.","Bedziemy w kontakcie, kebabowy wojowniku..."],after3:["Witaj ponownie, kebabowy wojowniku.","Stalo sie to, czego sie najbardziej obawialismy. Jedna z naszych najbardziej zasluzonych agentek w Elektryku - pani Maria, zaczela wyjawniac sluzbom tajemnice radomszczanskich karteli kebabowych.","Przykro nam, ze musialo do tego dojsc, ale musi ona zostac za wszelka cene powstrzymana.","Spotkaj sie z naszym informatorem w Elektryku przy sali matematycznej na drugim pietrze. Czas, abys otrzymal nasza specjalna bron, kebabowy wojowniku..."],after4:["Dostalismy informacje o twojej wygranej. Gratulacje, spisales sie, kebabowy wojowniku.","Przez ten czas udalo nam sie zwerbowac wystarczajaco agentow by odzyskac wladze i kontrole nad Radomskiem.","Hayati nieustannie traci klientow i popada w problemy finansowe. Nasze wtyki w organach miasta bez przerwy nasylaja na nich sanepidy i inspekcje pracy.","Przyszedl juz czas na ostateczny pojedynek z Hayati. Musimy zaatakowac ich lokal i ostatecznie przejac Radomsko.","Spotkaj sie z dyrektorem w Elektryku i wez od niego 10 000zl na zakup lokalu obok Hayati. Juz czas pokazac im kto w tym miescie rzadzi..."],win:["Radomsko znowu jest nasze...","Bez ciebie nigdy nam by sie nie udalo. Zaslugujesz na legendarna nagrode, kebabowy wojowniku...","Uczcijmy to zwyciestwo tortilla z cielecina i mieszanym..."]},dyrektor:{start:["Witamy w Elektryku, mlody!"],afterBodrum:["O, witam pana! Dobrze wiedziec, ze najlepszy wojownik Bodruma chodzi do naszej szkoly.","Co prawda nie powinienem ci tego mowic... ale pozytywnie zaskoczyles szefa. Chwalil twoje umiejetnosci waleczne i ma wobec ciebie spore nadzieje.","No coz, moze dzieki tobie uda nam sie przywrocic Bodrumowi dawna swietnosc.","Skoro juz tu jestes, moze bys przekonal paru uczniow do Bodruma? Ostatnio sporo ludzi przerzucilo sie na Hayati. Nie mozna na to pozwolic..."],afterBFight:["Swietna robota, mlody!","To bylo nie do pomyslenia, ze uczniowie jedza kebsy z Hayati na terenie Bodruma.","Dzwonil do mnie szef. Kazal ci natychmiast przyjsc, jakas pilna sprawa."],afterHayati:["No prosze, kogo my tu mamy...","Ledwo co do naszej szkoly dolaczyles, a juz sprawiasz problemy...","Dobrze ci radze - przemysl to co robisz, bo zle sie to dla ciebie skonczy...","Ja juz dobrze wiem, dla kogo pracujesz. Powiem ci tylko jedno: Elektryk to teren Bodruma..."],afterHFight:["Nie zdajesz sobie sprawy, co wlasnie zrobiles...","Probowalem cie ostrzec, ale jest juz za pozno. Wstapiles na sciezke wojny. Nie odpuscimy wam tego...","BODRUM WIDZI. BODRUM NIE WYBACZA."],takeMoney:["Szef kazal ci przekazac 10 000zl. Nie wiem czy nieletnim sprzedadza nieruchomosc w srodku miasta, ale agenci Bodruma juz pewnie to zalatwili.","Pieniadze te pochodza z dotacji unijnych. Poczatkowo mialy isc na remont sali 204, poniewaz jest to sala do pisania stron internetowych, gdzie nie dzialaja najpopularniejsze strony internetowe.","Uznalismy jednak, ze najpierw stworzymy skwerek, lake i wyremontujemy 3 inne, i tak juz nowoczesne sale."]},uczen1:{start:["O nie, znowu wy...","Ja sie w te wasze kebaby nie bawie!"],afterFight:["Dobra, niech ci bedzie. Zjem kebsa","Moze ta wasza kebabiarnia nie jest jednak taka zla..."]},uczen2:{start:["Zostawcie mnie, nie lubie kebabow!"],afterFight:["No dobra juz, zjem kebsa..."]},uczen_ffl:{start:["ROMANTYZM W EUROPIE TRWAL OD REWOLUCJI FRANCUSKIEJ DO WIOSNY LUDOW W 1848.","W POLSCE ROMANTYZM ZAPOCZATKOWAL ADAM MICKIEWICZ W 1822 WYDAJAC TOM POEZJI.","PELNY TYTUL PANA TADEUSZA TO: PAN TADEUSZ, CZYLI OSTATNI ZAJAZD NA LITWIE. HISTORIA SZLACHECKA Z ROKU 1811-1812 WE DWUNASTU KSIEGACH WIERSZEM.","NA SCIANACH DWORKU SOPLICOW WISIALY PORTRETY: TADEUSZA KOSCIUSZKI, TADEUSZA REJTANA, SAMUELA KORSAKA I JAKUBA JASINSKIEGO.","IZABELA LECKA W LALCE BOLESLAWA PRUSA NOSILA REKAWICZKI KOLORU BIALEGO, NUMER 5 I 3/4.","ZABIJ MNIE, PROSZE."]},randomUczen:{0:["Kruci, bitke chcesz?"],1:["Co, bic sie chcesz?"],2:["No dawaj, nie lubie kebabow."],3:["Kebabiarza pobije dla zasady."],4:["Jeb*c kebaby, co mi zrobisz?"],5:["Nie za stary jestes na bawienie sie w kebabowego wojownika?"],6:["Kebaby to jedzenie dla plebsu."],7:["Kupujac kebaba, osiedlasz araba hehe."],8:["Te kebaby to oni chyba z psow robia."],9:["Ludzie juz chyba nie wiedza co z czasem robic. Jak mozna walczyc o kebaby?"]},zwiazkowiec:{start:["A ty co chlopaczyno? Z Bodruma zes przylazl?","Kur*a kiedys to bylo, nie to co dzis. Za komuny to zesmy z Tadkiem siedzieli na dupie i wszystko bylo. Czy sie stoi, czy sie lezy, dwa tysiace sie nalezy hehehe.","Pamintam jak jeszcze Gierek byl to wtedy to bylo kur*a kiedys to bylo normalnie mowie ci. Kazdy samochod i mieszkanie mial i jakos sie zylo, nie to co teraz.","Teraz to lapowki od jakichs kebabiarni trzeba brac, bo na prund i jedzenie nie starczy. Ale wystarczy tego. Bodrum to juz nie to co kiedys.","Nie warto juz sie z wami zadawac. Glowy za takie marne pieniadze nadstawiac nie bede, gowniarze jedne."],afterFight:["Juz wystarczy... Widac umiecie jeszcze postawic na swoim.","Powiedz szefowi, ze jakby cos chcial, to jestesmy do dyspozycji."]},cygan:{start:["PANIE NAJJASNIEJSZY MOZE ZESTAW NOZY PAN KUPI?","TANIO TYLKO 20ZL ZA NOZ NIERDZEWNY LEPIEJ PAN NIE ZNAJDZIESZ."]},handlarz:{start:["Heh, dzieki. Tak sie sklada, ze akurat uratowales mnie od klopotow.","Zmykam stad, sluzby zaczely cos weszyc. Slyszalem natomiast o waszych planach. Dam ci za darmo troche materialow wybuchowych, i tak ich ze soba nie wezme. Powodzenia."]},informator:{start:["Witaj, kebabowy wojowniku.","Naprzeciwko nas jest sala pani Mirowskiej. Jesli masz przy sobie troche jedzenia, to powinno ci sie udac.","Ponadto szef kazal ci przekazac specjalna bron Bodruma. Tylko nieliczni maja okazje trzymac to cudo w rece."]},renata:{start:["NO WLASNIE...","WY CHYBA SPECJALNIE OPUSZCZACIE JEZYK POLSKI...","NIE MACIE DO MNIE SZACUNKU A ZA NIEDLUGO MATURA...","MUSZE WAS TROCHE PRZYPILOWAC. POWIEDZ MI PROSZE..."],questions:['KTO W DZIADACH CZESCI 3 WYPOWIADA SLOWA ,,NASZ NAROD JAK LAWA..."?',"SLUB GLOWACKIEGO Z TREMBINSKA W LALCE ODBYL SIE W","O WYWOZONYCH KIBITKAMI UCZNIACH ZE ZMUDZI W TRZECIEJ CZESCI DZIADOW OPOWIADA","PODCZAS SPOTKANIA SPISKOWYCH W KORDIANIE WARTOWNIKIEM JEST ","ILE FUNTOW WAZYLY LANCUCHY NA NOGACH WIEZNIOW W TRZECIEJ CZESCI DZIADOW?","KTOREGO MIESIACA UKAZALA SIE POWIESC KORDIAN?"],correct:["JAK WIDAC MOZNA TROCHE POSIEDZIEC I SIE NAUCZYC TAKICH PODSTAWOWYCH RZECZY...","ALE SKORO TAK DOBRZE JUZ ODPOWIADASZ, TO PORA ZROBIC CI MALA MATURE USTNA..."]},justyna:{start:["Jestes tu nowy, tak? Jak rozumiem nie masz pieniedzy ani ksiazek. Nie masz nic. Zaczynasz od nowa...","Ale znasz sie na interesach, a ja na chemii...","Pomyslalam, ze moglibysmy zostac wspolnikami...","Mam kilka gram w 99,1% czystej mety. Rozprowadz ja uczniom po Elektryku. Pieniadze oddasz mi na lekcji w czwartek."],questions:['KTO W DZIADACH CZESCI 3 WYPOWIADA SLOWA ,,NASZ NAROD JAK LAWA..."?',"SLUB GLOWACKIEGO Z TREMBINSKA W LALCE ODBYL SIE W","O WYWOZONYCH KIBITKAMI UCZNIACH ZE ZMUDZI W TRZECIEJ CZESCI DZIADOW OPOWIADA","PODCZAS SPOTKANIA SPISKOWYCH W KORDIANIE WARTOWNIKIEM JEST ","ILE FUNTOW WAZYLY LANCUCHY NA NOGACH WIEZNIOW W TRZECIEJ CZESCI DZIADOW?","KTOREGO MIESIACA UKAZALA SIE POWIESC KORDIAN?"],correct:["JAK WIDAC MOZNA TROCHE POSIEDZIEC I SIE NAUCZYC TAKICH PODSTAWOWYCH RZECZY...","ALE SKORO TAK DOBRZE JUZ ODPOWIADASZ, TO PORA ZROBIC CI MALA MATURE USTNA..."]}},repeating={controls:function(){this.right=game.input.keyboard.addKey(Phaser.Keyboard.D),this.left=game.input.keyboard.addKey(Phaser.Keyboard.A),this.up=game.input.keyboard.addKey(Phaser.Keyboard.W),this.down=game.input.keyboard.addKey(Phaser.Keyboard.S),this.space=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.e=game.input.keyboard.addKey(Phaser.Keyboard.E),this.special=game.input.keyboard.addKey(Phaser.Keyboard.F8)},addXP:function(e){var a=localStorage.getObject(saveName);a.xp+=e/a.lvl,a.lvl=Math.floor(a.xp/100),lvltext.text="LEVEL: "+a.lvl,localStorage.setObject(saveName,a)},getLVL:function(){return localStorage.getObject(saveName).lvl},updateSaves:function(){if(game.time.now>saveTimer){var e=new Date,a=localStorage.getObject(saveName);a.mapName=game.state.current,a.positionX=player.x,a.positionY=player.y,a.hour=e.getHours(),a.minute=e.getMinutes(),a.day=e.getDate(),a.month=e.getMonth()+1,a.year=e.getFullYear(),localStorage.setObject(saveName,a),saveTimer=game.time.now+2e3}},checkControls:function(){if(player.body.velocity.x=0,player.body.velocity.y=0,controls.up.isDown&&!inChat)player.animations.play("up"),player.body.velocity.y-=playerSpeed;else if(controls.down.isDown&&!inChat)player.animations.play("down"),player.body.velocity.y+=playerSpeed;else if(controls.right.isDown&&!inChat)player.animations.play("right"),player.body.velocity.x+=playerSpeed;else if(controls.left.isDown&&!inChat)player.animations.play("left"),player.body.velocity.x-=playerSpeed;else if(controls.e.isDown&&!inChat)player.frame=1,repeating.addEquipment();else if(controls.special.isDown&&!inChat){var e=localStorage.getObject(saveName);for(var a in items)e.items[a]=items[a],e.items[a].amount=900;for(var t in weapons)e.weapons[t]=weapons[t];e.playerHP=9999,e.money=99999999,localStorage.setObject(saveName,e)}player.body.velocity.x||player.body.velocity.y||inChat||(player.frame=1)},loadMolotovs:function(){},throwMolotov:function(){},loadMap:function(e,a,t,o){game.physics.startSystem(Phaser.Physics.ARCADE),game.stage.backgroundColor="#000",map=game.add.tilemap(e,64,64),map.addTilesetImage(a),layer=map.createLayer(0),layer.resizeWorld(),map.setCollisionBetween(t,o)},loadPlayer:function(e,a){var t=localStorage.getObject(saveName);player=game.add.sprite(e,a,"player"),player.scale.setTo(.9,.9),player.anchor.setTo(.5,.5),player.animations.add("up",[12,13,14,15],7,!0),player.animations.add("down",[0,1,2,3],7,!0),player.animations.add("left",[8,9,10,11],7,!0),player.animations.add("right",[4,5,6,7],7,!0),game.physics.arcade.enable(player),game.camera.follow(player),player.body.collideWorldBounds=!0;var o=game.add.sprite(20,78,"hp");o.scale.setTo(1.5,1.5),o.fixedToCamera=!0,hptext=game.add.text(65,120,t.playerHP,{fill:"#FFFFFF",font:"16px 'Press Start 2P' ",strokeThickness:4}),hptext.anchor.setTo(.5,.5),hptext.fixedToCamera=!0,lvltext=game.add.text(200,100,"LEVEL: "+t.lvl,{fill:"#FFFFFF",font:"16px 'Press Start 2P' ",strokeThickness:6}),lvltext.anchor.setTo(.5,.5),lvltext.fixedToCamera=!0},addLowerChat:function(e,a,t,o,n,i,r,s){if(!r){playerSpeed=0,inChat=!0,player.animations.stop(),n.x>i.x&&n.y>i.y-i.height+15&&n.y<=i.y+30?(i.frame=2,n.frame=8):n.x<i.x&&n.y>i.y-i.height+15&&n.y<=i.y+30?(i.frame=1,n.frame=5):n.y>i.y?(i.frame=0,n.frame=13):n.y<i.y&&(i.frame=3);var l=game.add.sprite(0,550,"lowerBar");l.fixedToCamera=!0;var c=game.add.sprite(l.x+50,l.y+50,t);c.fixedToCamera=!0;var d=0,m=game.add.text(c.x+.5*c.width,c.y+c.height+20,a,{fill:"#FFFFFF",font:"14px 'Press Start 2P' "});m.fixedToCamera=!0,m.anchor.setTo(.5,.5);var p=game.add.text(l.x+.5*l.width,l.y+l.height-30,"[[  SPACJA - PRZEWIN DIALOG  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});p.fixedToCamera=!0,p.anchor.setTo(.5,.5);var g=game.add.text(230,l.y+50,e[d],{fill:"#FFFFFF",font:"18px 'Press Start 2P' ",align:"left",wordWrap:!0,wordWrapWidth:1e3});g.fixedToCamera=!0,game.input.keyboard.start(),game.input.keyboard.addCallbacks(game,function(a){32===a.keyCode&&(e.length>d+1?g.text=e[++d]:(d=0,playerSpeed=defaultSpeed,game.input.keyboard.addCallbacks(game,function(e){}),inChat=!1,o.frame=0,l.kill(),c.kill(),g.kill(),p.kill(),m.kill(),s()))})}},addLowerText:function(e,a){playerSpeed=0,inChat=!0,player.animations.stop();var t=game.add.sprite(0,550,"lowerBar");t.fixedToCamera=!0;var o=game.add.text(t.x+.5*t.width,t.y+.3*t.height,e,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",wordWrap:!0,wordWrapWidth:1e3,align:"center"});o.fixedToCamera=!0,o.anchor.setTo(.5,.5);var n=game.add.text(t.x+.5*t.width,t.y+t.height-30,"[[  SPACJA - PRZEWIN DIALOG  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});n.fixedToCamera=!0,n.anchor.setTo(.5,.5),game.input.keyboard.addCallbacks(game,function(e){32===e.keyCode&&(playerSpeed=defaultSpeed,inChat=!1,t.kill(),n.kill(),o.kill(),game.input.keyboard.addCallbacks(game,function(e){}),a&&a())})},addLowerOption:function(e,a,t,o,n,i,r,s,l){if(!inChat||inFight){playerSpeed=0,inChat=!0,player.animations.stop();var c=game.add.sprite(0,550,"lowerBar");c.fixedToCamera=!0;var d=game.add.text(650,625,e,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",wordWrap:!0,wordWrapWidth:1e3});d.fixedToCamera=!0,d.anchor.setTo(.5,.5);var m=game.add.text(d.x-125,d.y+100,a,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6});m.fixedToCamera=!0,m.anchor.setTo(.5,.5);var p=game.add.text(m.x+250,d.y+100,t,{fill:"#FFFFFF",font:"20px 'Press Start 2P' "});if(p.fixedToCamera=!0,p.anchor.setTo(.5,.5),i){var g=game.add.text(p.x+250,d.y+100,i,{fill:"#FFFFFF",font:"20px 'Press Start 2P' "});g.fixedToCamera=!0,g.anchor.setTo(.5,.5)}if(!renatka){var u=game.add.text(c.x+.5*c.width,c.y+c.height-30,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});u.fixedToCamera=!0,u.anchor.setTo(.5,.5)}var f=[m,p];i&&f.push(g);var y=0;game.input.keyboard.addCallbacks(game,function(e){68===e.keyCode&&y<1?(f[y].stroke="#000000",f[y].strokeThickness=0,y++,f[y].stroke="#000000",f[y].strokeThickness=6):65===e.keyCode&&y>0?(f[y].stroke="#000000",f[y].strokeThickness=0,y--,f[y].stroke="#000000",f[y].strokeThickness=6):17===e.keyCode?renatka||(game.input.keyboard.addCallbacks(game,function(e){}),playerSpeed=defaultSpeed,c.kill(),m.kill(),p.kill(),u.kill(),d.kill(),inChat=!1):32===e.keyCode&&(game.input.keyboard.addCallbacks(game,function(e){}),playerSpeed=defaultSpeed,inChat=!1,c.kill(),m.kill(),renatka||u.kill(),p.kill(),d.kill(),0==y?o():1==y&&n())})}},addBattle:function(e,a,t,o,n){var i=localStorage.getObject(saveName);game.camera.flash(16777215,1e3),menu=game.add.sprite(0,0,"fullMenu"),menu.fixedToCamera=!0,playerSpeed=0,inFight=!0,inChat=!0,player.animations.stop(),enHP=Math.round(t*Math.log(1.5*i.lvl)),enemyHP=Math.round(t*Math.log(1.5*i.lvl)),enemyName=a,enDMG=o,kolba=n,enemi=game.add.sprite(640,400,e),enemi.anchor.setTo(.5,.5),enemi.scale.setTo(3,3),enemi.fixedToCamera=!0,repeating.showHP(),repeating.addFightOption()},showHP:function(){inChat=!0,hpgrp=game.add.group();var e=localStorage.getObject(saveName),a="GRACZ: "+e.playerHP+"/100";game.add.text(25,25,a,{fill:"#FFFFFF",font:"16px 'Press Start 2P' ",strokeThickness:6},hpgrp).fixedToCamera=!0,game.add.text(25,60,enemyName+": "+enHP+"/"+enemyHP,{fill:"#FFFFFF",font:"16px 'Press Start 2P' ",strokeThickness:6},hpgrp).fixedToCamera=!0},showWeapons:function(e){inChat=!0;var a=localStorage.getObject(saveName).weapons,t=[],o=[];for(var n in a)t.push(a[n]);textgrp=game.add.group();for(var i=0;i<t.length;i++)o[i]=game.add.text(25,25*i+35,t[i].name,{fill:"#FFFFFF",font:"14px 'Press Start 2P' "},textgrp),o[i].fixedToCamera=!0;o[0].strokeThickness=6,middleweapontext=game.add.text(640,675,"DMG: "+t[0].dmg*dmgMul,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0;var r=0,s=game.add.text(640,770,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});s.fixedToCamera=!0,s.anchor.setTo(.5,.5),game.input.keyboard.addCallbacks(game,function(e){function a(){if(enHP-t[r].dmg*dmgMul>0){enHP-=Number(Number(t[r].dmg*dmgMul).toFixed()),hpgrp.destroy(),repeating.showHP();var e=game.add.tween(enemi);e.to({x:enemi.x-15},150,Phaser.Easing.Sinusoidal.Out,!0,0,0,!0),1==turns||tw?(tw=!1,e.onComplete.addOnce(function(e){game.camera.shake(enDMG*dmgRed*.003,enDMG*dmgRed*10);var a=localStorage.getObject(saveName);if(a.playerHP-enDMG*dmgRed>0)a.playerHP-=Number(Number(enDMG*dmgRed).toFixed()),localStorage.setObject(saveName,a),hpgrp.destroy(),repeating.showHP(),repeating.addFightOption();else{renatka=!1,a.playerHP=0,localStorage.setObject(saveName,a),hpgrp.destroy(),repeating.showHP();var t=localStorage.getObject(saveName);t.playerHP=25,localStorage.setObject(saveName,t),game.input.keyboard.start(),repeating.addLowerText("Zostales pokonany!",function(){menu.destroy(),hpgrp.destroy(),enemi.destroy(),inChat=!1,inFight=!1,betweenMapChange="fromDead",game.state.start("Level1")})}},this),e.start()):(tw=!0,hpgrp.destroy(),repeating.showHP(),repeating.addFightOption())}else enHP=0,renatka=!1,hpgrp.destroy(),repeating.showHP(),game.input.keyboard.start(),repeating.addLowerText("Przeciwnik pokonany!",function(){menu.destroy(),hpgrp.destroy();var e=localStorage.getObject(saveName);enemi.destroy(),hptext.text=e.playerHP,inChat=!1,inFight=!1,kolba()})}if(87===e.keyCode&&r>0)o[r].strokeThickness=0,r--,o[r].strokeThickness=6,middleweapontext.text="DMG: "+t[r].dmg*dmgMul;else if(83===e.keyCode&&r<o.length-1)o[r].strokeThickness=0,r++,o[r].strokeThickness=6,middleweapontext.text="DMG: "+t[r].dmg*dmgMul;else if(17===e.keyCode)game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),hpgrp.destroy(),s.kill(),middleweapontext.destroy(),repeating.showHP(),repeating.addFightOption();else if(32===e.keyCode){game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),hpgrp.destroy(),s.kill(),middleweapontext.destroy(),enemi.cameraOffset.x=enemi.x,enemi.cameraOffset.y=enemi.y,enemi.fixedToCamera=!1;var n=game.add.tween(enemi);enemi.tint=9439240,n.to({x:enemi.x+10},150,null,!0,0,0,!0),n.onComplete.addOnce(function(e){e.tint=16777215,a()},this),n.start()}})},showItems:function(){function e(){t[s].heal?middleweapontext.text="HEAL: "+t[s].heal:middleweapontext.text=itemsEffects[t[s].key].desc}inChat=!0;var a=localStorage.getObject(saveName).items,t=[],o=[];for(var n in a)t.push(a[n]);textgrp=game.add.group();for(var i=0;i<t.length;i++)o[i]=game.add.text(25,25*i+35,t[i].amount+"x "+t[i].name,{fill:"#FFFFFF",font:"14px 'Press Start 2P' "},textgrp),o[i].fixedToCamera=!0;o[0]&&(o[0].strokeThickness=6,middleweapontext="heal"==t[0].type?game.add.text(640,675,"HEAL: "+t[0].heal,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}):game.add.text(640,675,itemsEffects[t[0].key].desc,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0);var r=game.add.text(640,770,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});r.fixedToCamera=!0,r.anchor.setTo(.5,.5);var s=0;game.input.keyboard.start(),game.input.keyboard.addCallbacks(game,function(a){if(87===a.keyCode&&s>0)o[s].strokeThickness=0,s--,o[s].strokeThickness=6,e();else if(83===a.keyCode&&s<o.length-1)o[s].strokeThickness=0,s++,o[s].strokeThickness=6,e();else if(17===a.keyCode)game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),hpgrp.destroy(),r.kill(),o[0]&&middleweapontext.destroy(),repeating.showHP(),repeating.addFightOption();else if(32===a.keyCode){game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),hpgrp.destroy(),r.kill(),o[0]&&middleweapontext.destroy(),o[0]||(repeating.showHP(),repeating.addFightOption());var n=localStorage.getObject(saveName);t[s];t[s].heal?n.playerHP+t[s].heal>100?n.playerHP=100:n.playerHP+=t[s].heal:itemsEffects[t[s].key].effect();for(var i in n.items)t[s].name===n.items[i].name&&(n.items[i].amount-1>0?(n.items[i].amount-=1,localStorage.setObject(saveName,n)):(delete n.items[i],localStorage.setObject(saveName,n)));game.input.keyboard.start(),hpgrp.destroy(),repeating.showHP(),repeating.addFightOption()}})},addFightOption:function(){inChat=!0,renatka=!0,repeating.addLowerOptionFight("","ATAK","USTAW BRON",function(){function e(){if(enHP-t.dmg*dmgMul>0){enHP-=Number(Number(t.dmg*dmgMul).toFixed()),hpgrp.destroy(),repeating.showHP();var e=game.add.tween(enemi);e.to({x:enemi.x-15},150,Phaser.Easing.Sinusoidal.Out,!0,0,0,!0),1==turns||tw?(tw=!1,e.onComplete.addOnce(function(e){game.camera.shake(enDMG*dmgRed*.003,enDMG*dmgRed*10);var a=localStorage.getObject(saveName);if(a.playerHP-enDMG*dmgRed>0)a.playerHP-=Number(Number(enDMG*dmgRed).toFixed()),localStorage.setObject(saveName,a),hpgrp.destroy(),repeating.showHP(),repeating.addFightOption();else{renatka=!1,a.playerHP=0,localStorage.setObject(saveName,a),hpgrp.destroy(),repeating.showHP();var t=localStorage.getObject(saveName);t.playerHP=25,localStorage.setObject(saveName,t),game.input.keyboard.start(),repeating.addLowerText("Zostales pokonany!",function(){menu.destroy(),hpgrp.destroy(),enemi.destroy(),inChat=!1,inFight=!1,betweenMapChange="fromDead",game.state.start("Level1")})}},this),e.start()):(tw=!0,hpgrp.destroy(),repeating.showHP(),repeating.addFightOption())}else enHP=0,renatka=!1,hpgrp.destroy(),repeating.showHP(),game.input.keyboard.start(),repeating.addLowerText("Przeciwnik pokonany!",function(){menu.destroy(),hpgrp.destroy();var e=localStorage.getObject(saveName);enemi.destroy(),hptext.text=e.playerHP,inChat=!1,inFight=!1,kolba()})}hpgrp.destroy(),inChat=!0;var a=localStorage.getObject(saveName).weapons,t=a.weapons[a.cw];game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),hpgrp.destroy(),skip.kill(),middleweapontext.destroy(),enemi.cameraOffset.x=enemi.x,enemi.cameraOffset.y=enemi.y,enemi.fixedToCamera=!1;var o=game.add.tween(enemi);enemi.tint=9439240,o.to({x:enemi.x+10},150,null,!0,0,0,!0),o.onComplete.addOnce(function(a){a.tint=16777215,e()},this),o.start(),playerSpeed=0},function(){hpgrp.destroy(),isEmpty(localStorage.getObject(saveName).items)?(repeating.showHP(),repeating.addFightOption()):repeating.showItems()},"PRZEDMIOTY")},addShop:function(e){function a(){middleweapontext.text="justyna"==e?itemsEffects[o[p].key].desc:"Po uzyciu: +"+o[p].heal+" HP"}if(playerSpeed=0,inChat=!0,player.animations.stop(),!inFight){menu=game.add.sprite(0,0,"fullMenu"),menu.fixedToCamera=!0,playerSpeed=0,inFight=!0,inChat=!0,player.animations.stop();var t=localStorage.getObject(saveName),o=[],n=[];for(var i in items)items[i].soldIn==e&&o.push(items[i]);textgrp=game.add.group();var r=game.add.text(212,40,"Portfel: "+t.money+"zl",{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6},textgrp);r.fixedToCamera=!0,r.anchor.setTo(.5,.5);for(var s=0;s<o.length;s++)n[s]=game.add.text(25,25*s+35+r.y,o[s].name+" - "+o[s].cost+"zl",{fill:"#FFFFFF",font:"14px 'Press Start 2P' "},textgrp),n[s].fixedToCamera=!0;n[0].strokeThickness=6,"justyna"==e?(middleweapontext=game.add.text(640,620,itemsEffects[o[0].key].desc,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0):(middleweapontext=game.add.text(640,620,"Po uzyciu: +"+o[0].heal+" HP",{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0);var l=game.add.text(middleweapontext.x-125,middleweapontext.y+100,"KUP",{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6});l.fixedToCamera=!0,l.anchor.setTo(.5,.5);var c=game.add.text(l.x+250,middleweapontext.y+100,"WYJDZ",{fill:"#FFFFFF",font:"20px 'Press Start 2P' "});c.fixedToCamera=!0,c.anchor.setTo(.5,.5);var d=[l,c],m=0,p=0;game.input.keyboard.start(),game.input.keyboard.addCallbacks(game,function(e){if(87===e.keyCode&&p>0)n[p].strokeThickness=0,p--,n[p].strokeThickness=6,a();else if(83===e.keyCode&&p<n.length-1)n[p].strokeThickness=0,p++,n[p].strokeThickness=6,a();else if(68===e.keyCode&&m<1)d[m].stroke="#000000",d[m].strokeThickness=0,m++,d[m].stroke="#000000",d[m].strokeThickness=6;else if(65===e.keyCode&&m>0)d[m].stroke="#000000",d[m].strokeThickness=0,m--,d[m].stroke="#000000",d[m].strokeThickness=6;else if(32===e.keyCode)if(0===m){var t=localStorage.getObject(saveName);if(t.money-o[p].cost>=0){t.money-=o[p].cost,r.text="Portfel: "+t.money+"zl",middleweapontext.text="Kupiono: "+o[p].name;if(isEmpty(t.items))t.items[o[p].key]=o[p],localStorage.setObject(saveName,t);else for(var i in t.items){if(o[p].name===t.items[i].name){
t.items[i].amount+=1,localStorage.setObject(saveName,t);break}if(o[p].key in t.items){t.items[o[p].key].amount+=1,localStorage.setObject(saveName,t);break}var s=o[p].key;t.items[s]=o[p],localStorage.setObject(saveName,t);break}}else middleweapontext.text="Nie stac cie na zakup przedmiotu";game.input.keyboard.start()}else playerSpeed=defaultSpeed,inChat=!1,game.input.keyboard.addCallbacks(game,function(e){}),inFight=!1,l.destroy(),c.destroy(),textgrp.destroy(),menu.destroy(),middleweapontext.destroy()})}},addRandomUczenFight:function(e,a){repeating.addLowerChat(quotes.randomUczen[Math.floor(10*Math.random())],"Uczen",a.key+"Head",fightgrp.children[0],e,a,!1,function(){repeating.addBattle(a.key,"Uczen",25,10,function(){repeating.addXP(50),a.kill();var e=localStorage.getObject(saveName);e.uczDef++;var t=Math.floor(14*Math.random()+7);e.money+=t,("Zwerbuj 5 uczniow Elektryka do Bodruma"==e.objective||"Zwerbuj 5 uczniow Elektryka do Hayati"==e.objective)&&e.uczDef>=5&&(e.objective="Wroc do dyrektora",fpsText.text="CEL: Wroc do dyrektora"),localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: "+t+"zl!")})})},addEquipment:function(){repeating.addLowerOption("EKWIPUNEK","USTAW BRON","PRZEDMIOTY",function(){var e=localStorage.getObject(saveName).weapons,a=localStorage.getObject(saveName);menu=game.add.sprite(0,0,"fullMenu"),menu.fixedToCamera=!0,"Ustaw nowa bron w ekwipunku klawiszem E"==a.objective&&("hayati"==a.faction?(a.objective="Naklon klientow Gucia do Hayati",fpsText.text="CEL: Naklon klientow Gucia do Hayati"):"bodrum"==a.faction&&(a.objective="Naklon klientow Gucia do Bodruma",fpsText.text="CEL: Naklon klientow Gucia do Bodruma"),localStorage.setObject(saveName,a)),inChat=!0;var t=[],o=[];for(var n in e)t.push(e[n]);textgrp=game.add.group();for(var i=0;i<t.length;i++)o[i]=game.add.text(25,25*i+35,t[i].name,{fill:"#FFFFFF",font:"14px 'Press Start 2P' "},textgrp),o[i].fixedToCamera=!0;o[0].strokeThickness=6,middleweapontext=game.add.text(640,675,"DMG: "+t[0].dmg*dmgMul,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0;var r=game.add.text(640,770,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});r.fixedToCamera=!0,r.anchor.setTo(.5,.5);var s=0;game.input.keyboard.addCallbacks(game,function(e){if(87===e.keyCode&&s>0)o[s].strokeThickness=0,s--,o[s].strokeThickness=6,middleweapontext.text="DMG: "+t[s].dmg*dmgMul;else if(83===e.keyCode&&s<o.length-1)o[s].strokeThickness=0,s++,o[s].strokeThickness=6,middleweapontext.text="DMG: "+t[s].dmg*dmgMul;else if(17===e.keyCode)game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),menu.destroy(),r.kill(),middleweapontext.destroy(),playerSpeed=defaultSpeed,inChat=!1,repeating.addEquipment();else if(32===e.keyCode){var a=localStorage.getObject(saveName);game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),menu.destroy(),r.kill(),playerSpeed=defaultSpeed,inChat=!1,middleweapontext.destroy(),a.cw=t[s].key,localStorage.setObject(saveName,a)}})},function(){function e(){t[r].heal?middleweapontext.text="HEAL: "+t[r].heal:middleweapontext.text=itemsEffects[t[r].key].desc}if(isEmpty(localStorage.getObject(saveName).items))repeating.addEquipment();else{menu=game.add.sprite(0,0,"fullMenu"),menu.fixedToCamera=!0,inChat=!0;var a=localStorage.getObject(saveName).items,t=[],o=[];for(var n in a)t.push(a[n]);textgrp=game.add.group();for(var i=0;i<t.length;i++)o[i]=game.add.text(25,25*i+35,t[i].amount+"x "+t[i].name,{fill:"#FFFFFF",font:"14px 'Press Start 2P' "},textgrp),o[i].fixedToCamera=!0;o[0].strokeThickness=6,middleweapontext="heal"==t[0].type?game.add.text(640,675,"HEAL: "+t[0].heal,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}):game.add.text(640,675,itemsEffects[t[0].key].desc,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0;var r=0;game.input.keyboard.start();var s=game.add.text(640,770,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});s.fixedToCamera=!0,s.anchor.setTo(.5,.5),game.input.keyboard.addCallbacks(game,function(a){if(87===a.keyCode&&r>0)o[r].strokeThickness=0,r--,o[r].strokeThickness=6,e();else if(83===a.keyCode&&r<o.length-1)o[r].strokeThickness=0,r++,o[r].strokeThickness=6,e();else if(17===a.keyCode)game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),menu.destroy(),s.kill(),middleweapontext.destroy(),playerSpeed=defaultSpeed,inChat=!1,repeating.addEquipment();else if(32===a.keyCode){game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),s.kill(),middleweapontext.destroy();var n=localStorage.getObject(saveName);t[r];t[r].heal?(n.playerHP+t[r].heal>100?n.playerHP=100:n.playerHP+=t[r].heal,hptext.text=n.playerHP):itemsEffects[t[r].key].effect();for(var i in n.items)t[r].name===n.items[i].name&&(n.items[i].amount-1>0?(n.items[i].amount-=1,localStorage.setObject(saveName,n)):(delete n.items[i],localStorage.setObject(saveName,n)));game.input.keyboard.start(),menu.destroy(),playerSpeed=defaultSpeed,inChat=!1}})}})},addLowerOptionFight:function(e,a,t,o,n,i,r,s,l){if(!inChat||inFight){playerSpeed=0,inChat=!0,player.animations.stop();var c=game.add.sprite(0,550,"lowerBar");c.fixedToCamera=!0;var d=game.add.text(460,625,e,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",wordWrap:!0,wordWrapWidth:1e3});d.fixedToCamera=!0,d.anchor.setTo(.5,.5);var m=game.add.text(d.x-125,d.y+100,a,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6});m.fixedToCamera=!0,m.anchor.setTo(.5,.5);var p=game.add.text(m.x+250,d.y+100,t,{fill:"#FFFFFF",font:"20px 'Press Start 2P' "});p.fixedToCamera=!0,p.anchor.setTo(.5,.5);var g=game.add.text(p.x+310,d.y+100,i,{fill:"#FFFFFF",font:"20px 'Press Start 2P' "});if(g.fixedToCamera=!0,g.anchor.setTo(.5,.5),!renatka){var u=game.add.text(c.x+.5*c.width,c.y+c.height-30,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});u.fixedToCamera=!0,u.anchor.setTo(.5,.5)}var f=[m,p];i&&f.push(g);var y=0;game.input.keyboard.addCallbacks(game,function(u){function h(){if(enHP-k.dmg*dmgMul>0){enHP-=Number(Number(k.dmg*dmgMul).toFixed()),hpgrp.destroy(),repeating.showHP();var e=game.add.tween(enemi);e.to({x:enemi.x-15},150,Phaser.Easing.Sinusoidal.Out,!0,0,0,!0),1==turns||tw?(tw=!1,e.onComplete.addOnce(function(e){game.camera.shake(enDMG*dmgRed*.003,enDMG*dmgRed*10);var a=localStorage.getObject(saveName);if(a.playerHP-enDMG*dmgRed>0)a.playerHP-=Number(Number(enDMG*dmgRed).toFixed()),localStorage.setObject(saveName,a),hpgrp.destroy(),repeating.showHP(),repeating.addFightOption();else{renatka=!1,a.playerHP=0,localStorage.setObject(saveName,a),hpgrp.destroy(),repeating.showHP();var t=localStorage.getObject(saveName);t.playerHP=25,localStorage.setObject(saveName,t),game.input.keyboard.start(),repeating.addLowerText("Zostales pokonany!",function(){menu.destroy(),hpgrp.destroy(),enemi.destroy(),inChat=!1,inFight=!1,betweenMapChange="fromDead",game.state.start("Level1")})}},this),e.start()):(tw=!0,hpgrp.destroy(),repeating.showHP(),repeating.addFightOption())}else enHP=0,renatka=!1,hpgrp.destroy(),repeating.showHP(),game.input.keyboard.start(),repeating.addLowerText("Przeciwnik pokonany!",function(){menu.destroy(),hpgrp.destroy();var e=localStorage.getObject(saveName);enemi.destroy(),hptext.text=e.playerHP,inChat=!1,inFight=!1,kolba()})}if(68===u.keyCode&&y<2)f[y].stroke="#000000",f[y].strokeThickness=0,y++,f[y].stroke="#000000",f[y].strokeThickness=6;else if(65===u.keyCode&&y>0)f[y].stroke="#000000",f[y].strokeThickness=0,y--,f[y].stroke="#000000",f[y].strokeThickness=6;else if(17===u.keyCode)renatka||(game.input.keyboard.addCallbacks(game,function(e){}),playerSpeed=defaultSpeed,inChat=!1,c.kill(),m.kill(),p.kill(),T.kill(),d.kill());else if(32===u.keyCode)if(game.input.keyboard.addCallbacks(game,function(e){}),playerSpeed=defaultSpeed,inChat=!1,c.kill(),m.kill(),g.kill(),renatka||T.kill(),p.kill(),d.kill(),0==y){hpgrp.destroy(),inChat=!0;var z=localStorage.getObject(saveName),k=z.weapons[z.cw];game.input.keyboard.addCallbacks(game,function(e){}),hpgrp.destroy(),enemi.cameraOffset.x=enemi.x,enemi.cameraOffset.y=enemi.y,enemi.fixedToCamera=!1;var b=game.add.tween(enemi);enemi.tint=9439240,b.to({x:enemi.x+10},150,null,!0,0,0,!0),b.onComplete.addOnce(function(e){e.tint=16777215,h()},this),b.start()}else if(1==y){hpgrp.destroy(),inChat=!0;var z=localStorage.getObject(saveName).weapons,w=[],C=[];for(var j in z)w.push(z[j]);textgrp=game.add.group();for(var v=0;v<w.length;v++)C[v]=game.add.text(25,25*v+35,w[v].name,{fill:"#FFFFFF",font:"14px 'Press Start 2P' "},textgrp),C[v].fixedToCamera=!0;C[0].strokeThickness=6,middleweapontext=game.add.text(640,675,"DMG: "+w[0].dmg*dmgMul,{fill:"#FFFFFF",font:"20px 'Press Start 2P' ",strokeThickness:6}),middleweapontext.anchor.setTo(.5,.5),middleweapontext.fixedToCamera=!0;var T=game.add.text(640,770,"[[  CTRL - WYJDZ  ]]",{fill:"#FFFFFF",font:"16px 'Press Start 2P' "});T.fixedToCamera=!0,T.anchor.setTo(.5,.5);var x=0;game.input.keyboard.addCallbacks(game,function(c){if(87===c.keyCode&&x>0)C[x].strokeThickness=0,x--,C[x].strokeThickness=6,middleweapontext.text="DMG: "+w[x].dmg*dmgMul;else if(83===c.keyCode&&x<C.length-1)C[x].strokeThickness=0,x++,C[x].strokeThickness=6,middleweapontext.text="DMG: "+w[x].dmg*dmgMul;else if(17===c.keyCode)game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),T.kill(),middleweapontext.destroy(),repeating.addLowerOptionFight(e,a,t,o,n,i,r,s,l),repeating.showHP();else if(32===c.keyCode){var d=localStorage.getObject(saveName);game.input.keyboard.addCallbacks(game,function(e){}),textgrp.destroy(),T.kill(),middleweapontext.destroy(),d.cw=w[x].key,localStorage.setObject(saveName,d),repeating.addLowerOptionFight(e,a,t,o,n,i,r,s,l),repeating.showHP()}})}else 2==y&&(hpgrp.destroy(),repeating.showItems())})}},createSave:function(){localStorage.setObject(saveName,{mapName:"Level1",positionX:477,positionY:340,objective:"Porozmawiaj z Lechem",hour:0,minute:0,day:0,month:0,year:0,playerHP:100,money:0,uczDef:0,faction:"",cw:"piesc",lvl:1,xp:1,lp:0,ph1:0,ph2:0,items:{},weapons:{piesc:weapons.piesc},quotes:{flags:{bikePosition:"",boughtKebab:!1,boughtHayatiLeft:!1,emptiedUpperBin:!1,emptiedLowerBin:!1,uczen1Defeated:!1,uczen2Defeated:!1,uczen_fflDefeated:!1,dyrektorInCenter:!0,renataDefeated:!1,POLBreached:!1,inforDefeated:!1,mariaDefeated:!1,szefDefeated:!1,szefowaDefeated:!1,polDefeated:!1,HWB:!1,HDO:!1,BE:!1},lechu:{start:!1},szefowa:{start:!1},szef:{start:!1},uczen_ffl:{start:!1},zwiazkowiec:{start:!1,afterFight:!1},uczen1:{start:!1},uczen2:{start:!1},dyrektor:{start:!1}}})}},Boot={preload:function(){this.load.image("preloaderBar","assets/titlescreen.png")},create:function(){game.scale.fullScreenScaleMode=Phaser.ScaleManager.EXACT_FIT,this.time.advancedTiming=!0,this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,game.stage.backgroundColor="#fff",game.stage.smoothed=!1,game.antialias=!1,document.querySelector("button").onclick=function(){game.scale.startFullScreen()},game.state.start("Preloader")}},preloadBar=null,Preloader={preload:function(){game.preloadBar=game.add.sprite(game.world.centerX,game.world.centerY,"preloaderBar"),game.preloadBar.anchor.setTo(.5,.5),game.load.setPreloadSprite(game.preloadBar),game.load.spritesheet("player","assets/player.png",48,62.5),game.load.image("hp","assets/hp.png"),game.load.image("lowerBar","assets/lowerMenu.png"),game.load.image("fullMenu","assets/fullMenu.png"),game.load.spritesheet("button","assets/button.png",74,43),game.load.image("titlescreen","assets/titlescreen.png"),game.load.spritesheet("uczen1","assets/uczen1.png",50,59),game.load.image("uczen1Head","assets/uczen1_head.png"),game.load.spritesheet("uczen2","assets/uczen2.png",50,59),game.load.image("uczen2Head","assets/uczen2_head.png"),game.load.spritesheet("uczen3","assets/uczen3.png",50,59),game.load.spritesheet("uczen4","assets/uczen4.png",50,59),game.load.spritesheet("uczen5","assets/uczen5.png",50,59),game.load.spritesheet("uczen6","assets/uczen6.png",50,59),game.load.spritesheet("uczen7","assets/uczen7.png",50,59),game.load.spritesheet("uczen8","assets/uczen8.png",50,59),game.load.image("uczen3Head","assets/uczen3_head.png"),game.load.image("uczen4Head","assets/uczen4_head.png"),game.load.image("uczen5Head","assets/uczen5_head.png"),game.load.image("uczen6Head","assets/uczen6_head.png"),game.load.image("uczen7Head","assets/uczen7_head.png"),game.load.image("uczen8Head","assets/uczen8_head.png")},create:function(){game.state.start("MainMenu")}},titlescreen,saveName,MainMenu={create:function(e){e.stage.backgroundColor="#fff","save1"in localStorage?this.createButton("WCZYTAJ GRE",e.world.centerX,e.world.centerY+32,300,100,function(){var a=localStorage.getObject("save1"),t=localStorage.getObject("save2"),o=localStorage.getObject("save3"),n=e.add.text(800,382,"ZAPIS 1: "+a.hour+":"+a.minute+" - "+a.day+":"+a.month+":"+a.year,{font:"14px 'Press Start 2P' ",fill:"#000",align:"center"});n.inputEnabled=!0,n.events.onInputOver.add(function(e){e.fill="#e50000"},this),n.events.onInputOut.add(function(e){e.fill="#000"},this),n.events.onInputDown.add(function(a){a.fill="#7f0000",saveName="save1",e.state.start(localStorage.getObject("save1").mapName)},this);var i=e.add.text(800,421,"ZAPIS 2: "+t.hour+":"+t.minute+" - "+t.day+":"+t.month+":"+t.year,{font:"14px 'Press Start 2P' ",fill:"#000",align:"center"});i.inputEnabled=!0,i.events.onInputOver.add(function(e){e.fill="#e50000"},this),i.events.onInputOut.add(function(e){e.fill="#000"},this),i.events.onInputDown.add(function(a){a.fill="#7f0000",saveName="save2",e.state.start(localStorage.getObject("save2").mapName)},this);var r=e.add.text(800,460,"ZAPIS 3: "+o.hour+":"+o.minute+" - "+o.day+":"+o.month+":"+o.year,{font:"14px 'Press Start 2P' ",fill:"#000",align:"center"});r.inputEnabled=!0,r.events.onInputOver.add(function(e){e.fill="#e50000"},this),r.events.onInputOut.add(function(e){e.fill="#000"},this),r.events.onInputDown.add(function(a){a.fill="#7f0000",saveName="save3",e.state.start(localStorage.getObject("save3").mapName)},this)},1,0,2):this.createButton("WCZYTAJ GRE",e.world.centerX,e.world.centerY+32,300,100,function(){},2,2,2),this.createButton("NOWA GRA",e.world.centerX,e.world.centerY+192,300,100,function(){"save1"in localStorage&&!("save2"in localStorage)?(saveName="save2",repeating.createSave(),e.state.start("Level1")):"save2"in localStorage&&!("save3"in localStorage)?(saveName="save3",repeating.createSave(),e.state.start("Level1")):"save1"in localStorage&&!("save3"in localStorage)||(saveName="save1",repeating.createSave(),e.state.start("Level1"))},1,0,2),e.add.text(1090,770,gameVersion,{font:"18px 'Press Start 2P' ",fill:"#000",align:"center"}),titlescreen=e.add.sprite(e.world.centerX,e.world.centerY-192,"titlescreen"),titlescreen.anchor.setTo(.5,.5)},update:function(){},createButton:function(e,a,t,o,n,i,r,s,l){var c=game.add.button(a,t,"button",i,this,r,s,l);c.anchor.setTo(.5,.55),c.width=o,c.height=n,game.add.text(c.x,c.y,e,{font:"20px 'Press Start 2P' ",fill:"#ffffff",align:"center"}).anchor.setTo(.5,.5)}},Level1={preload:function(){game.load.tilemap("map","assets/lechuroom.csv"),game.load.image("tileset_lechuroom","assets/lechu_room_tileset.png"),game.load.spritesheet("lechu","assets/lechu.png",50,59),game.load.image("lechuHead","assets/lechu_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("map","tileset_lechuroom",0,11),map.setTileIndexCallback(2,function(){betweenMapChange="fromLechu",game.state.start("FFR")},game),lechu=game.add.sprite(290,97,"lechu"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0,1==betweenMapChange?(repeating.loadPlayer(672,920),betweenMapChange=!1):"fromDead"==betweenMapChange?(repeating.loadPlayer(477,340),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,lechu,function(e,a){var t=localStorage.getObject(saveName),o=!1;for(var n in t.items){t.items[n].lechu&&(o=t.items[n]);break}t.quotes.lechu.start?o&&!t.quotes.flags.boughtKebab?(t.items[n].amount>1?t.items[n].amount-=1:delete t.items[n],localStorage.setObject(saveName,t),repeating.addLowerChat(quotes.lechu.bringKebab,"Lechu","lechuHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.quotes.flags.boughtKebab=!0,e.money+=20,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 20zl!")})):"Wroc do Lecha"!=t.objective&&"Idz do Lecha"!=t.objective||repeating.addLowerChat(quotes.lechu.afterJoiningFaction,"Lechu","lechuHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Spotkaj sie z dyrektorem Elektryka",localStorage.setObject(saveName,e),fpsText.text="CEL: Spotkaj sie z dyrektorem Elektryka"}):repeating.addLowerChat(quotes.lechu.start,"Lechu","lechuHead",lechu,e,a,localStorage.getObject(saveName).quotes.lechu.start,function(){var e=localStorage.getObject(saveName);e.objective="Jedz dolaczyc do dowolnej frakcji",e.quotes.lechu.start=!0,e.money+=10,localStorage.setObject(saveName,e),fpsText.text="CEL: Jedz dolaczyc do dowolnej frakcji",repeating.addLowerText("Dostales: 10zl!")})})}},FFR={preload:function(){game.load.tilemap("FFR","assets/first_floor_right.csv"),game.load.image("tileset_FFR","assets/first_floor_right.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("FFR","tileset_FFR",0,29),map.setTileLocationCallback(9,0,1,1,function(){betweenMapChange="fromFFR",game.state.start("ANG")},game),map.setTileLocationCallback(18,2,1,1,function(){betweenMapChange=!0,game.state.start("Level1")},game),map.setTileLocationCallback(20,5,1,2,function(){betweenMapChange="fromRightFF",game.state.start("GF")},game),map.setTileLocationCallback(20,7,1,2,function(){betweenMapChange="fromRightFF",game.state.start("SF")},game),map.setTileLocationCallback(7,36,2,1,function(){betweenMapChange="fromDownFF",game.state.start("GF")},game),map.setTileLocationCallback(9,36,2,1,function(){betweenMapChange="fromDownFF",game.state.start("SF")},game),"fromLechu"==betweenMapChange?(repeating.loadPlayer(1102,150),betweenMapChange=!1):"fromRightSF"==betweenMapChange?(repeating.loadPlayer(1239,495),betweenMapChange=!1):"fromDownSF"==betweenMapChange?(repeating.loadPlayer(615,2200),betweenMapChange=!1):"fromRightGF"==betweenMapChange?(repeating.loadPlayer(1239,379),betweenMapChange=!1):"fromDownGF"==betweenMapChange?(repeating.loadPlayer(540,2237),betweenMapChange=!1):"fromANG"==betweenMapChange?(repeating.loadPlayer(610,130),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),fightgrp=game.add.group(),fightgrp.enableBody=!0,fightgrp.create(485,1705,"uczen3"),fightgrp.create(671,1239,"uczen5"),fightgrp.create(672,269,"uczen7"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0),fightgrp.children[0].frame=2,fightgrp.children[1].frame=3,fightgrp.children[2].frame=1,controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addRandomUczenFight(e,a)})}},FFL={preload:function(){game.load.image("tileset_FFL","assets/first_floor_left.png"),game.load.tilemap("FFL","assets/first_floor_left.csv"),game.load.spritesheet("uczen_ffl","assets/uczen_ffl.png",50,59),game.load.image("uczen_fflHead","assets/uczen_ffl_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("FFL","tileset_FFL",0,29),map.setTileLocationCallback(12,12,1,2,function(){betweenMapChange="fromLeftFF",game.state.start("GF")},game),map.setTileLocationCallback(21,17,1,1,function(){betweenMapChange="fromFFL",game.state.start("HIS")},game),map.setTileLocationCallback(12,15,1,2,function(){betweenMapChange="fromLeftFF",game.state.start("SF")},game),map.setTileLocationCallback(15,17,1,1,function(){return e.quotes.flags.POLBreached?(betweenMapChange="fromFFL",game.state.start("POL")):repeating.addLowerOption("Drzwi do sali od polskiego zabite sa deskami. Od spodu wylewa sie krew a w powietrzu unosi sie smrod zgnilizny. Czy na pewno chcesz tu wejsc?","TAK","NIE",function(){var e=localStorage.getObject(saveName);e.quotes.flags.POLBreached=!0,localStorage.setObject(saveName,e),betweenMapChange="fromFFL",game.state.start("POL")},function(){}),!0},game),map.setTileLocationCallback(18,12,1,1,function(){return e.quotes.flags.emptiedLowerBin||(repeating.addLowerText("Grzebiesz w smietniku. Znalazles bron: Papierowe shurikeny."),e.weapons.papieroweshurikeny=weapons.papieroweshurikeny,e.quotes.flags.emptiedLowerBin=!0,localStorage.setObject(saveName,e)),!0},game),"fromLeftGF"==betweenMapChange?(repeating.loadPlayer(896,828),betweenMapChange=!1):"fromLeftSF"==betweenMapChange?(repeating.loadPlayer(896,1015),betweenMapChange=!1):"fromPOL"==betweenMapChange?(repeating.loadPlayer(996,1040),betweenMapChange=!1):"fromHIS"==betweenMapChange?(repeating.loadPlayer(1375,1052),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),e.quotes.flags.uczen_fflDefeated||(uczen1=game.add.sprite(1053,805,"uczen_ffl"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.body.immovable=!0),controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,uczen1,function(e,a){var t=localStorage.getObject(saveName);repeating.addLowerChat(quotes.uczen_ffl.start,"Uczen","uczen_fflHead",uczen1,e,a,localStorage.getObject(saveName).quotes.uczen_ffl.start,function(){repeating.addBattle("uczen_ffl","Uczen",5,0,function(){uczen1.kill(),t.quotes.flags.uczen_fflDefeated=!0,t.quotes.uczen_ffl.start=!0,localStorage.setObject(saveName,t)})})})}},SF={preload:function(){game.load.image("tileset_SF","assets/second_floor.png"),game.load.tilemap("SF","assets/second_floor.csv"),game.load.spritesheet("informator","assets/informator.png",50,59),game.load.image("informatorHead","assets/informator_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("SF","tileset_SF",0,32),map.setTileLocationCallback(22,3,1,1,function(){betweenMapChange="fromSF",game.state.start("WIAI")},game),map.setTileLocationCallback(39,9,1,2,function(){betweenMapChange="fromRightSF",game.state.start("FFR")},game),map.setTileLocationCallback(3,1,1,2,function(){betweenMapChange="fromLeftSF",game.state.start("FFL")},game),map.setTileLocationCallback(26,40,2,1,function(){betweenMapChange="fromDownSF",game.state.start("FFR")},game),map.setTileLocationCallback(5,6,1,1,function(){betweenMapChange="fromSF",game.state.start("MAT")},game),map.setTileLocationCallback(21,1,1,1,function(){return e.quotes.flags.emptiedUpperBin||(repeating.addLowerText("Grzebiesz w smietniku. Ludzie patrza sie na ciebie jak na debila, ale znalazles: 10zl."),e.money+=10,e.quotes.flags.emptiedUpperBin=!0,localStorage.setObject(saveName,e)),!0},game),map.setTileLocationCallback(31,12,1,1,function(){return repeating.addLowerText("Magazyny z najnowszymi kartami graficznymi i samochodami przypominaja ci jak bardzo jestes biedny."),!0},game),"fromRightFF"==betweenMapChange?(repeating.loadPlayer(2442,619),betweenMapChange=!1):"fromLeftFF"==betweenMapChange?(repeating.loadPlayer(317,145),betweenMapChange=!1):"fromDownFF"==betweenMapChange?(repeating.loadPlayer(1742,2476),betweenMapChange=!1):"fromMAT"==betweenMapChange?(repeating.loadPlayer(348,310),betweenMapChange=!1):"fromWIAI"==betweenMapChange?(repeating.loadPlayer(1347,223),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),e.quotes.flags.inforDefeated||(uczen1=game.add.sprite(606,105,"informator"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.scale.setTo(1.2,1.2),uczen1.body.immovable=!0),fightgrp=game.add.group(),fightgrp.enableBody=!0,fightgrp.create(1539,732,"uczen6"),fightgrp.create(1860,2247,"uczen8"),fightgrp.create(1860,1045,"uczen5"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0),fightgrp.children[0].frame=3,fightgrp.children[1].frame=1,fightgrp.children[2].frame=1,controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addRandomUczenFight(e,a)}),game.physics.arcade.collide(player,uczen1,function(e,a){var t=localStorage.getObject(saveName);"Spotkaj sie z informatorem Bodruma przy sali matematycznej"===t.objective?repeating.addLowerChat(quotes.informator.start,"Informator","informatorHead",uczen1,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Pokonaj pania Marie",e.weapons.ukryteostrze=weapons.ukryteostrze,localStorage.setObject(saveName,e),fpsText.text="CEL: Pokonaj pania Marie",repeating.addLowerText("Dostales bron: Ukryte ostrze!")}):"Pozbadz sie informatora Bodruma przy sali matematycznej"===t.objective&&repeating.addBattle("informator","Informator",33,15,function(){uczen1.kill(),repeating.addXP(50),t.quotes.flags.inforDefeated=!0,t.objective="Wroc do szefowej",fpsText.text="CEL: "+t.objective,localStorage.setObject(saveName,t)})})}},fightgrp,GF={preload:function(){game.load.image("tileset_GF","assets/ground_floor.png"),game.load.tilemap("GF","assets/ground_floor.csv"),game.load.spritesheet("dyrektor","assets/dyrektor.png",50,59),game.load.image("dyrektorHead","assets/dyrektor_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("GF","tileset_GF",0,39),map.setTileLocationCallback(25,47,1,1,function(){betweenMapChange="fromGF",game.state.start("MIETEK")},game),map.setTileLocationCallback(30,47,1,1,function(){betweenMapChange="fromGF",game.state.start("ECDL")},game),map.setTileLocationCallback(3,18,1,2,function(){betweenMapChange="fromLeftGF",game.state.start("FFL")},game),map.setTileLocationCallback(39,25,1,2,function(){betweenMapChange="fromRightGF",game.state.start("FFR")},game),map.setTileLocationCallback(28,54,2,1,function(){betweenMapChange="fromDownGF",game.state.start("FFR")},game),map.setTileLocationCallback(26,54,2,1,function(){betweenMapChange="fromFrontElektryk",game.state.start("outsideElektryk")},game),map.setTileLocationCallback(18,25,2,1,function(){return repeating.addShop("automat"),!0},game),map.setTileLocationCallback(20,25,1,1,function(){return repeating.addShop("kawa"),!0},game),map.setTileLocationCallback(7,7,1,1,function(){return repeating.addLowerText("Zrodelko wody ochlapuje ci morde."),!0},game),"fromLeftFF"==betweenMapChange?(repeating.loadPlayer(326,1211),betweenMapChange=!1):"fromRightFF"==betweenMapChange?(repeating.loadPlayer(2425,1648),betweenMapChange=!1):"fromDownFF"==betweenMapChange?(repeating.loadPlayer(1861,3355),betweenMapChange=!1):"fromOutsideElektryk"==betweenMapChange?(repeating.loadPlayer(1755,3394),betweenMapChange=!1):"fromMIETEK"==betweenMapChange?(repeating.loadPlayer(1715,3038),betweenMapChange=!1):"fromECDL"==betweenMapChange?(repeating.loadPlayer(1868,3038),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),fightgrp=game.add.group(),fightgrp.enableBody=!0,fightgrp.create(810,535,"uczen3"),fightgrp.create(907,535,"uczen4"),fightgrp.create(1890,2907,"uczen5"),fightgrp.create(1720,2133,"uczen6"),fightgrp.create(1320,1e3,"uczen7"),fightgrp.create(2303,1500,"uczen8"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0),fightgrp.children[0].frame=3,fightgrp.children[1].frame=3,fightgrp.children[2].frame=1,fightgrp.children[3].frame=2,uczen1=game.add.sprite(1695,1445,"dyrektor"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.body.immovable=!0,controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,uczen1,function(e,a){var t=localStorage.getObject(saveName);"bodrum"===t.faction&&"Spotkaj sie z dyrektorem Elektryka"===t.objective?repeating.addLowerChat(quotes.dyrektor.afterBodrum,"Dyrektor","dyrektorHead",uczen1,e,a,!1,function(){t.quotes.dyrektor.start=!0,t.objective="Zwerbuj 5 uczniow Elektryka do Bodruma",fpsText.text="CEL: Zwerbuj 5 uczniow Elektryka do Bodruma",t.uczDef=0,localStorage.setObject(saveName,t)}):"hayati"===t.faction&&"Spotkaj sie z dyrektorem Elektryka"===t.objective?repeating.addLowerChat(quotes.dyrektor.afterHayati,"Dyrektor","dyrektorHead",uczen1,e,a,!1,function(){t.quotes.dyrektor.start=!0,t.objective="Zwerbuj 5 uczniow Elektryka do Hayati",t.uczDef=0,fpsText.text="CEL: Zwerbuj 5 uczniow Elektryka do Hayati",localStorage.setObject(saveName,t)}):"bodrum"==t.faction&&"Wroc do dyrektora"===t.objective?repeating.addLowerChat(quotes.dyrektor.afterBFight,"Dyrektor","dyrektorHead",uczen1,e,a,!1,function(){t.objective="Zamelduj sie u szefa",fpsText.text="CEL: Zamelduj sie u szefa",localStorage.setObject(saveName,t)}):"hayati"==t.faction&&"Wroc do dyrektora"===t.objective?repeating.addLowerChat(quotes.dyrektor.afterHFight,"Dyrektor","dyrektorHead",uczen1,e,a,!1,function(){t.objective="Zamelduj sie u szefowej",fpsText.text="CEL: Zamelduj sie u szefowej",localStorage.setObject(saveName,t)}):"Szturm na Hayati - Odbierz 10 000zl od dyrektora"===t.objective?repeating.addLowerChat(quotes.dyrektor.takeMoney,"Dyrektor","dyrektorHead",uczen1,e,a,!1,function(){t.money+=1e4,t.objective="Szturm na Hayati - Kup lokal za 10 000zl obok Hayati",fpsText.text="CEL: Szturm na Hayati - Kup lokal za 10 000zl obok Hayati",localStorage.setObject(saveName,t),repeating.addLowerText("Dostales: 10 000zl!")}):t.quotes.dyrektor.start||repeating.addLowerChat(quotes.dyrektor.start,"Dyrektor","dyrektorHead",uczen1,e,a,localStorage.getObject(saveName).quotes.dyrektor.start,function(){t.quotes.dyrektor.start=!0,localStorage.setObject(saveName,t)})}),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addRandomUczenFight(e,a)})}},outsideElektryk={preload:function(){game.load.image("tileset_outsideElektryk","assets/outsideElektryk.png"),game.load.tilemap("outsideElektryk","assets/outsideElektryk.csv"),game.load.spritesheet("smoke","assets/smoke.png",150,300),game.load.image("camper","assets/camper.png"),game.load.spritesheet("justyna","assets/justyna.png",50,59),game.load.image("justynaHead","assets/justyna_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("outsideElektryk","tileset_outsideElektryk",0,33),map.setTileLocationCallback(8,2,2,1,function(){betweenMapChange="fromOutsideElektryk",game.state.start("GF")
},game),map.setTileLocationCallback(20,2,1,2,function(){return repeating.addLowerOption("Dokad chcesz pojechac?","HAYATI","BODRUM",function(){var e=localStorage.getObject(saveName);e.quotes.flags.bikePosition="hayati",localStorage.setObject(saveName,e),betweenMapChange="toHayati",game.state.start("city1")},function(){var e=localStorage.getObject(saveName);e.quotes.flags.bikePosition="bodrum",localStorage.setObject(saveName,e),betweenMapChange="toBodrum",game.state.start("city2")}),!0},game),"fromFrontElektryk"==betweenMapChange?(repeating.loadPlayer(589,247),betweenMapChange=!1):"toOutsideElektryk"==betweenMapChange?(repeating.loadPlayer(1210,193),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,repeating.loadMolotovs(),uczen1=game.add.sprite(356,230,"justyna"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.scale.setTo(1.2,1.2),uczen1.body.immovable=!0;var a=(game.add.sprite(35,370,"camper"),game.add.sprite(126,-70,"smoke"));a.scale.setTo(1.5,1.5),a.animations.add("flash",[0,1,2],3,!0),a.animations.play("flash"),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,uczen1,function(e,a){localStorage.getObject(saveName);repeating.addShop("justyna")})}},uczen1,uczen2,cygan,city1={preload:function(){game.load.image("tileset_city1","assets/city1.png"),game.load.tilemap("city1","assets/city1.csv"),game.load.spritesheet("cygan","assets/cygan.png",50,59),game.load.image("cyganHead","assets/cygan_head.png"),game.load.spritesheet("policjant","assets/policjant.png",50,59),game.load.image("policjantHead","assets/policjant_head.png"),game.load.image("handlarzHead","assets/handlarz_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("city1","tileset_city1",0,139),map.setTileLocationCallback(16,9,3,1,function(){var e=localStorage.getObject(saveName);return"Szturm na Bodruma - odbierz ladunki wybuchowe z budki kolo Gucia"!=e.objective&&"Szturm na Hayati - odbierz ladunki wybuchowe z budki kolo Gucia"!=e.objective||!e.quotes.flags.polDefeated||repeating.addLowerChat(quotes.handlarz.start,"Handlarz","handlarzHead",!1,{},{},!1,function(){var e=localStorage.getObject(saveName);"hayati"==e.faction?(e.objective="Szturm na Bodruma - Pokonaj szefa Bodruma",fpsText.text="CEL: Szturm na Bodruma - Pokonaj szefa Bodruma"):(e.objective="Szturm na Hayati - Podloz ladunki wybuchowe",fpsText.text="CEL: Szturm na Hayati - Podloz ladunki wybuchowe"),repeating.addLowerText("Dostales: ladunki wybuchowe!"),localStorage.setObject(saveName,e)}),!0},game),map.setTileLocationCallback(49,17,3,1,function(){betweenMapChange="fromCity1",game.state.start("city2")},game),map.setTileLocationCallback(77,11,2,1,function(){return"Szturm na Hayati"!=e.objective.slice(0,16)&&(betweenMapChange="fromCity1Right",game.state.start("hayati")),!0},game),map.setTileLocationCallback(68,11,7,1,function(){var e=localStorage.getObject(saveName);return e.quotes.flags.boughtHayatiLeft&&"Szturm na Bodruma - odbierz ladunki wybuchowe z budki kolo Gucia"!=e.objective&&"Szturm na Hayati - odbierz ladunki wybuchowe z budki kolo Gucia"!=e.objective?(betweenMapChange="fromCity1Left",game.state.start("hayati")):e.money>=1e4?repeating.addLowerOption("Czy chcesz kupic lokal za 10 000zl?","TAK","NIE",function(){e.quotes.flags.boughtHayatiLeft=!0,e.money-=1e4,e.objective="Szturm na Hayati - odbierz ladunki wybuchowe z budki kolo Gucia",fpsText.text="CEL: Szturm na Hayati - odbierz ladunki wybuchowe z budki kolo Gucia",localStorage.setObject(saveName,e),repeating.addLowerText("Kupiles lokal!"),lechu=game.add.sprite(1121,668,"policjant"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0,lechu.frame=3},function(){}):e.quotes.flags.boughtHayatiLeft||repeating.addLowerText("Nie masz 10 000zl na zakup lokalu, bo jestes biedny. Kredytu tez nie wezmiesz, bo nie dodalem takiej opcji do gry, a nawet jakbym dodal, to i tak bys nie mial zdolnosci kredytowej xd."),!0},game),"fromCity2"==betweenMapChange?(repeating.loadPlayer(3235,1030),betweenMapChange=!1):"fromHayatiLeft"==betweenMapChange?(repeating.loadPlayer(4572,822),betweenMapChange=!1):"fromHayatiRight"==betweenMapChange?(repeating.loadPlayer(5009,809),betweenMapChange=!1):"toHayati"==betweenMapChange?(repeating.loadPlayer(4723,815),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),"hayati"==e.quotes.flags.bikePosition&&(map.putTile(24,75,12),map.putTile(32,75,13),map.setTileLocationCallback(75,12,1,2,function(){return repeating.addLowerOption("Dokad chcesz pojechac?","ELEKTRYK","BODRUM",function(){var e=localStorage.getObject(saveName);e.quotes.flags.bikePosition="",localStorage.setObject(saveName,e),betweenMapChange="toOutsideElektryk",game.state.start("outsideElektryk")},function(){var e=localStorage.getObject(saveName);e.quotes.flags.bikePosition="bodrum",localStorage.setObject(saveName,e),betweenMapChange="toBodrum",game.state.start("city2")}),!0},game)),e.quotes.flags.uczen1Defeated||(uczen1=game.add.sprite(361,607,"uczen1"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.body.immovable=!0,uczen1.frame=3),e.quotes.flags.uczen2Defeated||(uczen2=game.add.sprite(104,666,"uczen2"),game.physics.arcade.enable(uczen2),uczen2.anchor.setTo(.5,.5),uczen2.enableBody=!0,uczen2.body.immovable=!0,uczen2.frame=2),"Szturm na Bodruma - odbierz ladunki wybuchowe z budki kolo Gucia"!=e.objective&&"Szturm na Hayati - odbierz ladunki wybuchowe z budki kolo Gucia"!=e.objective||e.quotes.flags.polDefeated||(lechu=game.add.sprite(1121,668,"policjant"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0,lechu.frame=3),fightgrp=game.add.group(),fightgrp.enableBody=!0,fightgrp.create(5685,797,"uczen8"),fightgrp.create(2940,917,"uczen7"),fightgrp.create(2880,917,"uczen3"),fightgrp.create(1952,919,"uczen4"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0),fightgrp.children[1].frame=1,fightgrp.children[2].frame=2,fightgrp.children[3].frame=3,cygan=game.add.sprite(1288,796,"cygan"),game.physics.arcade.enable(cygan),cygan.anchor.setTo(.5,.5),cygan.enableBody=!0,cygan.body.immovable=!0,controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addRandomUczenFight(e,a)}),game.physics.arcade.collide(player,cygan,function(e,a){var t=localStorage.getObject(saveName);t.weapons.nozcygana||repeating.addLowerChat(quotes.cygan.start,"Cygan","cyganHead",cygan,e,a,!1,function(){repeating.addLowerOption("Czy chcesz kupic noz cygana za 30zl?","TAK","NIE",function(){t.money>=30?(t.weapons.nozcygana=weapons.nozcygana,t.money-=30,localStorage.setObject(saveName,t),repeating.addLowerText("Kupiono: Noz od cygana!")):repeating.addLowerText("Nie masz 30zl.")},function(){})})}),game.physics.arcade.collide(player,lechu,function(e,a){repeating.addBattle("policjant","Policjant",50,20,function(){var e=localStorage.getObject(saveName);lechu.kill(),e.quotes.flags.polDefeated=!0,localStorage.setObject(saveName,e)})}),game.physics.arcade.collide(player,uczen1,function(e,a){var t=localStorage.getObject(saveName);!t.quotes.flags.uczen1Defeated&&t.faction&&repeating.addLowerChat(quotes.uczen1.start,"Uczen","uczen1Head",uczen1,e,a,localStorage.getObject(saveName).quotes.uczen1.start,function(){repeating.addBattle("uczen1","Uczen",35,8,function(){repeating.addLowerChat(quotes.uczen1.afterFight,"Uczen","uczen1Head",uczen1,e,a,localStorage.getObject(saveName).quotes.uczen1.afterFight,function(){}),repeating.addXP(100);var t=localStorage.getObject(saveName);t.quotes.flags.uczen1Defeated=!0,t.quotes.flags.uczen1Defeated&&t.quotes.flags.uczen2Defeated&&"hayati"==t.faction?t.objective="Wroc do Hayati":t.quotes.flags.uczen1Defeated&&t.quotes.flags.uczen2Defeated&&"bodrum"==t.faction&&(t.objective="Wroc do Bodruma"),fpsText.text="CEL: "+t.objective,localStorage.setObject(saveName,t)})})}),game.physics.arcade.collide(player,uczen2,function(e,a){var t=localStorage.getObject(saveName);!t.quotes.flags.uczen2Defeated&&t.faction&&repeating.addLowerChat(quotes.uczen2.start,"Uczen","uczen2Head",uczen2,e,a,localStorage.getObject(saveName).quotes.uczen2.start,function(){repeating.addBattle("uczen2","Uczen",35,8,function(){repeating.addLowerChat(quotes.uczen2.afterFight,"Uczen","uczen2Head",uczen2,e,a,localStorage.getObject(saveName).quotes.uczen2.afterFight,function(){}),repeating.addXP(100);var t=localStorage.getObject(saveName);t.quotes.flags.uczen2Defeated=!0,t.quotes.flags.uczen1Defeated&&t.quotes.flags.uczen2Defeated&&"hayati"==t.faction?t.objective="Wroc do Hayati":t.quotes.flags.uczen1Defeated&&t.quotes.flags.uczen2Defeated&&"bodrum"==t.faction&&(t.objective="Wroc do Bodruma"),fpsText.text="CEL: "+t.objective,localStorage.setObject(saveName,t)})})})}},city2={preload:function(){game.load.image("tileset_city2","assets/city2.png"),game.load.tilemap("city2","assets/city2.csv"),game.load.spritesheet("zwiazkowiec","assets/zwiazkowiec.png",50,59),game.load.image("zwiazkowiecHead","assets/zwiazkowiec_head.png")},create:function(){var e=localStorage.getObject(saveName);if(repeating.loadMap("city2","tileset_city2",0,79),map.setTileLocationCallback(107,4,1,3,function(){betweenMapChange="fromCity2",game.state.start("city1")},game),map.setTileLocationCallback(5,3,3,1,function(){var e=localStorage.getObject(saveName);return e.quotes.flags.BE||"Szturm na Bodruma - odbierz ladunki wybuchowe z budki kolo Gucia"==e.objective||(betweenMapChange="fromCity2",game.state.start("bodrum")),!0},game),"fromCity1"==betweenMapChange)repeating.loadPlayer(6775,346),betweenMapChange=!1;else if("fromBodrum"==betweenMapChange){if(repeating.loadPlayer(418,334),betweenMapChange=!1,"Idz do Hayati uczcic zwyciestwo"==e.objective){game.camera.shake(.3,200);var e=localStorage.getObject(saveName);e.quotes.flags.BE=!0,localStorage.setObject(saveName,e)}}else"toBodrum"==betweenMapChange?(repeating.loadPlayer(693,313),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY);"bodrum"==e.quotes.flags.bikePosition&&(map.putTile(24,12,4),map.putTile(32,12,5),map.setTileLocationCallback(12,4,1,2,function(){return repeating.addLowerOption("Dokad chcesz pojechac?","ELEKTRYK","HAYATI",function(){var e=localStorage.getObject(saveName);e.quotes.flags.bikePosition="",localStorage.setObject(saveName,e),betweenMapChange="toOutsideElektryk",game.state.start("outsideElektryk")},function(){var e=localStorage.getObject(saveName);e.quotes.flags.bikePosition="hayati",localStorage.setObject(saveName,e),betweenMapChange="toHayati",game.state.start("city1")}),!0},game)),lechu=game.add.sprite(1867,284,"zwiazkowiec"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0,fightgrp=game.add.group(),fightgrp.enableBody=!0,fightgrp.create(5785,284,"uczen8"),fightgrp.create(5706,284,"uczen7"),fightgrp.create(3816,284,"uczen3"),fightgrp.create(3428,284,"uczen4"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0),fightgrp.children[0].frame=1,fightgrp.children[1].frame=2,controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addRandomUczenFight(e,a)}),game.physics.arcade.collide(player,lechu,function(e,a){var t=localStorage.getObject(saveName);"Napraw kontakty ze zwiazkowcami"===t.objective&&repeating.addLowerChat(quotes.zwiazkowiec.start,"Zwiazkowiec","zwiazkowiecHead",lechu,e,a,localStorage.getObject(saveName).quotes.zwiazkowiec.start,function(){repeating.addBattle("zwiazkowiec","Zwiazkowiec",33,15,function(){repeating.addLowerChat(quotes.zwiazkowiec.afterFight,"Zwiazkowiec","zwiazkowiecHead",lechu,e,a,!1,function(){t.objective="Wroc do szefa",t.quotes.zwiazkowiec.start=!0,localStorage.setObject(saveName,t),fpsText.text="CEL: Wroc do szefa"})})})})}},ucz2,lad1,lad2,cnt,f1,f2,hayati={preload:function(){game.load.image("tileset_hayati","assets/hayati.png"),game.load.tilemap("hayati","assets/hayati.csv"),game.load.spritesheet("szefowa","assets/szefowa.png",50,59),game.load.spritesheet("kolo","assets/circle.png",300,300),game.load.image("szefowaHead","assets/szefowa_head.png")},create:function(){function e(){30==map.getTile(10,8).index&&30==map.getTile(10,9).index&&(lad1=game.add.sprite(645,548,"kolo"),lad1.anchor.setTo(.5,.5),lad1.animations.add("flash",[0,1],5,!0),lad1.animations.play("flash"),lad2=game.add.sprite(645,578,"kolo"),lad2.anchor.setTo(.5,.5),lad2.animations.add("flash",[0,1],5,!0),lad2.animations.play("flash"),game.time.events.add(5e3,function(){var e=localStorage.getObject(saveName);e.quotes.flags.HWB=!0,e.objective="Szturm na Hayati - Pokonaj szefowa Hayati",fpsText.text="CEL: Szturm na Hayati - Pokonaj szefowa Hayati",localStorage.setObject(saveName,e),game.camera.shake(.3,200),fightgrp.children[3].kill(),fightgrp.children[4].kill(),fightgrp.children[5].kill(),lad2.destroy(),lad1.destroy(),map.putTile(39,10,8),map.putTile(39,10,9),map.putTile(39,10,7),map.putTile(39,10,10),map.putTile(38,11,8),map.putTile(38,11,9),map.putTile(38,11,7),map.putTile(38,11,10),map.putTile(38,12,8),map.putTile(38,12,9),map.putTile(38,13,9)},this))}var a=localStorage.getObject(saveName);if(repeating.loadMap("hayati","tileset_hayati",0,31),map.setTileLocationCallback(5,16,1,1,function(){betweenMapChange="fromHayatiLeft",game.state.start("city1")},game),map.setTileLocationCallback(12,16,2,1,function(){betweenMapChange="fromHayatiRight",game.state.start("city1")},game),map.setTileLocationCallback(16,12,1,2,function(){return localStorage.getObject(saveName).quotes.flags.HWB||repeating.addShop("hayati"),!0},game),"fromCity1Left"==betweenMapChange?(repeating.loadPlayer(358,947),betweenMapChange=!1):"fromCity1Right"==betweenMapChange?(repeating.loadPlayer(864,991),betweenMapChange=!1):repeating.loadPlayer(a.positionX,a.positionY),("hayati"==a.faction||a.quotes.flags.HDO)&&map.putTile(35,15,2),a.quotes.flags.HWB&&(map.putTile(35,15,2),map.putTile(39,10,8),map.putTile(39,10,9),map.putTile(39,10,7),map.putTile(39,10,10),map.putTile(38,11,8),map.putTile(38,11,9),map.putTile(38,11,7),map.putTile(38,11,10),map.putTile(38,12,8),map.putTile(38,12,9),map.putTile(38,13,9)),a.quotes.flags.szefowaDefeated||("Szturm na Hayati"==a.objective.slice(0,16)?(lechu=game.add.sprite(1122,988,"szefowa"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.frame=3,lechu.body.immovable=!0):(lechu=game.add.sprite(988,680,"szefowa"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0)),a.quotes.flags.uczen1Defeated&&"hayati"==a.faction){var t=game.add.sprite(758,690,"uczen1");game.physics.arcade.enable(t),t.anchor.setTo(.5,.5),t.enableBody=!0,t.body.immovable=!0,t.frame=2}if(a.quotes.flags.uczen2Defeated&&"hayati"==a.faction&&(ucz2=game.add.sprite(1122,156,"uczen2"),game.physics.arcade.enable(ucz2),ucz2.anchor.setTo(.5,.5),ucz2.enableBody=!0,ucz2.body.immovable=!0,ucz2.frame=3),fightgrp=game.add.group(),fightgrp.enableBody=!0,"Szturm na Hayati"==a.objective.slice(0,16)&&(fightgrp.create(926,472,"uczen6"),fightgrp.create(1118,357,"uczen7"),fightgrp.create(926,223,"uczen8"),fightgrp.children[1].frame=3,fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0)),"Szturm na Hayati - Podloz ladunki wybuchowe"==a.objective){fightgrp.create(746,661,"uczen3"),fightgrp.create(746,611,"uczen4"),fightgrp.create(746,476,"uczen5"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0),fightgrp.children[3].frame=2,fightgrp.children[4].frame=2,fightgrp.children[5].frame=2;var a=localStorage.getObject(saveName);a.quotes.flags.HDO=!0,localStorage.setObject(saveName,a),map.putTile(35,15,2),map.putTile(26,10,8),map.putTile(26,10,9),map.setTileLocationCallback(10,8,1,1,function(){return f1||(f1=!0,map.putTile(30,10,8),e()),!0},game),map.setTileLocationCallback(10,9,1,1,function(){return f2||(f2=!0,map.putTile(30,10,9),e()),!0},game)}controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+a.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,ucz2),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addBattle(a.key,"Wojownik",35,23,function(){a.kill()})}),game.physics.arcade.collide(player,lechu,function(e,a){var t=localStorage.getObject(saveName);"Jedz dolaczyc do dowolnej frakcji"===t.objective?repeating.addLowerChat(quotes.szefowa.start,"Szefowa","szefowaHead",lechu,e,a,localStorage.getObject(saveName).quotes.szefowa.start,function(){repeating.addLowerOption("Czy chcesz dolaczyc do frakcji Hayati?","TAK","NIE",function(){map.putTile(35,15,2);var e=localStorage.getObject(saveName);e.objective="Ustaw nowa bron w ekwipunku klawiszem E",e.quotes.szefowa.start=!0,e.faction="hayati",e.weapons.plastikowynozhayati=weapons.plastikowynozhayati,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales bron: Plastikowy noz Hayati!"),fpsText.text="CEL: Ustaw nowa bron w ekwipunku klawiszem E"},function(){})}):"Wroc do Hayati"===t.objective?(repeating.addXP(100),repeating.addLowerChat(quotes.szefowa.after1,"Szefowa","szefowaHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Pozbadz sie informatora Bodruma przy sali matematycznej",e.money+=10,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 10zl!"),fpsText.text="CEL: Pozbadz sie informatora Bodruma przy sali matematycznej"})):"Wroc do szefowej"===t.objective?(repeating.addXP(300),repeating.addLowerChat(quotes.szefowa.after2,"Szefowa","szefowaHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Wroc do Lecha",localStorage.setObject(saveName,e),fpsText.text="CEL: Wroc do Lecha"})):"Zamelduj sie u szefowej"===t.objective?(repeating.addXP(450),repeating.addLowerChat(quotes.szefowa.after3,"Szefowa","szefowaHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Pokonaj pania Marie",e.weapons.maczeta=weapons.maczeta,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales bron: Maczeta do kebabow!"),fpsText.text="CEL: Pokonaj pania Marie"})):"Poinformuj szefowa o wygranej walce"===t.objective?(repeating.addXP(600),repeating.addLowerChat(quotes.szefowa.after4,"Szefowa","szefowaHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Szturm na Bodruma - odbierz ladunki wybuchowe z budki kolo Gucia",e.money+=25,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 25zl!"),fpsText.text="CEL: Szturm na Bodruma - odbierz ladunki wybuchowe z budki kolo Gucia"})):"Idz do Hayati uczcic zwyciestwo"===t.objective?repeating.addLowerChat(quotes.szefowa.win,"Szefowa","szefowaHead",lechu,e,a,!1,function(){repeating.addXP(1e3);var e=localStorage.getObject(saveName);e.objective="Sprawuj kontrole nad Radomskiem",e.money+=100,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 100zl!",function(){repeating.addLowerText("Hayati przejelo kontrole nad Radomskiem.")}),fpsText.text="CEL: Sprawuj kontrole nad Radomskiem"}):"Szturm na Hayati - Pokonaj szefowa Hayati"==t.objective&&repeating.addBattle("szefowa","Szefowa",55,25,function(){repeating.addXP(700);var e=localStorage.getObject(saveName);lechu.kill(),e.quotes.flags.szefowaDefeated=!0,e.objective="Idz do Bodruma uczcic zwyciestwo",fpsText.text="CEL: Idz do Bodruma uczcic zwyciestwo",localStorage.setObject(saveName,e)})})}},bodrum={preload:function(){game.load.image("tileset_bodrum","assets/bodrum.png"),game.load.tilemap("bodrum","assets/bodrum.csv"),game.load.spritesheet("szef","assets/szef.png",50,59),game.load.image("szefHead","assets/szef_head.png"),game.load.spritesheet("kolo","assets/circle.png",300,300)},create:function(){function e(){if(20==map.getTile(4,8).index&&20==map.getTile(8,4).index&&20==map.getTile(8,9).index){n=game.add.sprite(285,535,"kolo"),n.anchor.setTo(.5,.5),n.animations.add("flash",[0,1],5,!0),n.animations.play("flash"),i=game.add.sprite(541,280,"kolo"),i.anchor.setTo(.5,.5),i.animations.add("flash",[0,1],5,!0),i.animations.play("flash"),r=game.add.sprite(545,590,"kolo"),r.anchor.setTo(.5,.5),r.animations.add("flash",[0,1],5,!0),r.animations.play("flash");var e=localStorage.getObject(saveName);e.objective="Idz do Hayati uczcic zwyciestwo",fpsText.text="CEL: Idz do Hayati uczcic zwyciestwo",localStorage.setObject(saveName,e)}}var a,t,o,n,i,r,s=localStorage.getObject(saveName);if(repeating.loadMap("bodrum","tileset_bodrum",0,28),"Szturm na Bodruma"==s.objective.slice(0,17)&&(map.putTile(31,4,8),map.putTile(31,8,9),map.putTile(31,8,4)),map.setTileLocationCallback(4,8,1,1,function(){return localStorage.getObject(saveName).quotes.flags.szefDefeated&&(a||(a=!0,map.putTile(20,4,8),e())),!0},game),map.setTileLocationCallback(8,4,1,1,function(){return localStorage.getObject(saveName).quotes.flags.szefDefeated&&(t||(t=!0,map.putTile(20,8,4),e())),!0},game),map.setTileLocationCallback(8,9,1,1,function(){return localStorage.getObject(saveName).quotes.flags.szefDefeated&&(o||(o=!0,map.putTile(20,8,9),e())),!0},game),map.setTileLocationCallback(5,13,3,1,function(){betweenMapChange="fromBodrum",game.state.start("city2")},game),map.setTileLocationCallback(9,7,1,2,function(){return"Szturm na Bodruma"!=s.objective.slice(0,17)&&repeating.addShop("bodrum"),!0},game),"fromCity2"==betweenMapChange?(repeating.loadPlayer(418,759),betweenMapChange=!1):repeating.loadPlayer(s.positionX,s.positionY),"Szturm na Bodruma"!=s.objective.slice(0,17)||s.quotes.flags.szefDefeated?s.quotes.flags.szefDefeated||(lechu=game.add.sprite(550,642,"szef"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0,lechu.frame=1):(lechu=game.add.sprite(514,95,"szef"),game.physics.arcade.enable(lechu),lechu.anchor.setTo(.5,.5),lechu.enableBody=!0,lechu.body.immovable=!0),s.quotes.flags.uczen1Defeated&&"bodrum"==s.faction){var l=game.add.sprite(150,665,"uczen1");game.physics.arcade.enable(l),l.anchor.setTo(.5,.5),l.enableBody=!0,l.body.immovable=!0,l.frame=0}if(s.quotes.flags.uczen2Defeated&&"bodrum"==s.faction){var c=game.add.sprite(400,280,"uczen2");game.physics.arcade.enable(c),c.anchor.setTo(.5,.5),c.enableBody=!0,c.body.immovable=!0,c.frame=0}fightgrp=game.add.group(),fightgrp.enableBody=!0,"Szturm na Bodruma - Pokonaj szefa Bodruma"==s.objective&&(fightgrp.create(515,435,"uczen6"),fightgrp.create(515,331,"uczen7"),fightgrp.create(515,252,"uczen8"),fightgrp.setAll("anchor.x",.5),fightgrp.setAll("anchor.y",.5),fightgrp.setAll("body.immovable",!0)),controls=new repeating.controls,repeating.loadMolotovs(),fpsText=game.add.text(20,30,"CEL: "+s.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer),game.physics.arcade.collide(player,fightgrp,function(e,a){repeating.addBattle(a.key,"Wojownik",35,23,function(){a.kill()})}),game.physics.arcade.collide(player,lechu,function(e,a){var t=localStorage.getObject(saveName);"Jedz dolaczyc do dowolnej frakcji"===t.objective?repeating.addLowerChat(quotes.szef.start,"Szef","szefHead",lechu,e,a,localStorage.getObject(saveName).quotes.szef.start,function(){repeating.addLowerOption("Czy chcesz dolaczyc do frakcji Bodrum?","TAK","NIE",function(){var e=localStorage.getObject(saveName);e.objective="Ustaw nowa bron w ekwipunku klawiszem E",e.quotes.szef.start=!0,e.faction="bodrum",e.weapons.plastikowynozbodrum=weapons.plastikowynozbodrum,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales bron: Plastikowy noz Bodrum!"),fpsText.text="CEL: Ustaw nowa bron w ekwipunku klawiszem E"},function(){})}):"Wroc do Bodruma"===t.objective?(repeating.addXP(300),repeating.addLowerChat(quotes.szef.after1,"Szef","szefHead",lechu,e,a,localStorage.getObject(saveName).quotes.szef.after1,function(){var e=localStorage.getObject(saveName);e.objective="Napraw kontakty ze zwiazkowcami",e.quotes.szef.after1=!0,e.money+=10,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 10zl!"),fpsText.text="CEL: Napraw kontakty ze zwiazkowcami"})):"Wroc do szefa"===t.objective?(repeating.addXP(300),repeating.addLowerChat(quotes.szef.after2,"Szef","szefHead",lechu,e,a,localStorage.getObject(saveName).quotes.szef.after2,function(){var e=localStorage.getObject(saveName);e.objective="Idz do Lecha",e.quotes.szef.after2=!0,localStorage.setObject(saveName,e),fpsText.text="CEL: Idz do Lecha"})):"Zamelduj sie u szefa"===t.objective?(repeating.addXP(450),repeating.addLowerChat(quotes.szef.after3,"Szef","szefHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Spotkaj sie z informatorem Bodruma przy sali matematycznej",localStorage.setObject(saveName,e),fpsText.text="CEL: Spotkaj sie z informatorem Bodruma przy sali matematycznej"})):"Poinformuj szefa o wygranej walce"===t.objective?(repeating.addXP(600),repeating.addLowerChat(quotes.szef.after4,"Szef","szefHead",lechu,e,a,!1,function(){var e=localStorage.getObject(saveName);e.objective="Szturm na Hayati - Odbierz 10 000zl od dyrektora",e.money+=25,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 25zl!"),fpsText.text="CEL: Szturm na Hayati - Odbierz 10 000zl od dyrektora"})):"Idz do Bodruma uczcic zwyciestwo"===t.objective?repeating.addLowerChat(quotes.szef.win,"Szef","szefHead",lechu,e,a,!1,function(){repeating.addXP(1e3);var e=localStorage.getObject(saveName);e.objective="Sprawuj kontrole nad Radomskiem",e.money+=100,localStorage.setObject(saveName,e),repeating.addLowerText("Dostales: 100zl!",function(){repeating.addLowerText("Bodrum przejal kontrole nad Radomskiem.")}),fpsText.text="CEL: Sprawuj kontrole nad Radomskiem"}):"Szturm na Bodruma - Pokonaj szefa Bodruma"==t.objective&&repeating.addBattle("szef","Szef",55,25,function(){repeating.addXP(700);var e=localStorage.getObject(saveName);lechu.kill(),e.quotes.flags.szefDefeated=!0,e.objective="Szturm na Bodruma - Podloz ladunki wybuchowe",fpsText.text="CEL: Szturm na Bodruma - Podloz ladunki wybuchowe",localStorage.setObject(saveName,e)})})}},POL={preload:function(){game.load.image("tileset_POL","assets/polskiroom_tileset.png"),game.load.tilemap("POLroom","assets/polskiroom.csv"),game.load.spritesheet("renata","assets/renata.png",50,59),game.load.image("renataHead","assets/renata_head.png")},create:function(){function e(){repeating.addBattle("renata","RENATA",300,98,function(){repeating.addXP(5e3),uczen1.kill(),renatka=!1,a.quotes.flags.renataDefeated=!0,a.weapons.pantadeusz=weapons.pantadeusz,localStorage.setObject(saveName,a),repeating.addLowerText("Dostales bron: Pan Tadeusz!")})}var a=localStorage.getObject(saveName);repeating.loadMap("POLroom","tileset_POL",0,5),map.setTileLocationCallback(14,0,1,1,function(){if(!a.quotes.flags.renataDefeated)return renatka=!0,repeating.addLowerChat(quotes.renata.start,"RENATA","renataHead",uczen1,{},{},!1,function(){repeating.addLowerOption(quotes.renata.questions[0],"O KUR*A...","Wysocki",function(){e()},function(){repeating.addLowerOption(quotes.renata.questions[1],"Lublinie","Kaliszu",function(){repeating.addLowerOption(quotes.renata.questions[2],"Sobolewski","Janczewski",function(){repeating.addLowerOption(quotes.renata.questions[3],"Szyld","Szyldwach",function(){e()},function(){repeating.addLowerOption(quotes.renata.questions[4],"10","9",function(){repeating.addLowerOption(quotes.renata.questions[5],"Maj","Marzec",function(){e()},function(){repeating.addLowerChat(quotes.renata.correct,"RENATA","renataHead",uczen1,{},{},!1,function(){e()})})},function(){e()})})},function(){e()})},function(){e()})})}),!0;betweenMapChange="fromPOL",game.state.start("FFL")},game),"fromFFL"==betweenMapChange?(repeating.loadPlayer(924,125),betweenMapChange=!1):repeating.loadPlayer(a.positionX,a.positionY),a.quotes.flags.renataDefeated||(uczen1=game.add.sprite(577,392,"renata"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.scale.setTo(1.2,1.2),uczen1.body.immovable=!0),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+a.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,uczen1)}},MAT={preload:function(){game.load.image("tileset_MAT","assets/mataroom_tileset.png"),game.load.tilemap("MATroom","assets/mataroom.csv"),game.load.spritesheet("maria","assets/maria.png",50,59),game.load.image("mariaHead","assets/maria_head.png")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("MATroom","tileset_MAT",0,8),map.setTileLocationCallback(14,0,1,1,function(){betweenMapChange="fromMAT",game.state.start("SF")},game),"fromSF"==betweenMapChange?(repeating.loadPlayer(927,137),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),e.quotes.flags.mariaDefeated||(uczen1=game.add.sprite(87,500,"maria"),game.physics.arcade.enable(uczen1),uczen1.anchor.setTo(.5,.5),uczen1.enableBody=!0,uczen1.frame=2,uczen1.body.immovable=!0),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){}),game.physics.arcade.collide(player,uczen1,function(e,a){"Pokonaj pania Marie"===localStorage.getObject(saveName).objective&&repeating.addBattle("maria","Maria",75,30,function(){var e=localStorage.getObject(saveName);"bodrum"==e.faction?(e.objective="Poinformuj szefa o wygranej walce",fpsText.text="CEL: Poinformuj szefa o wygranej walce"):(e.objective="Poinformuj szefowa o wygranej walce",fpsText.text="CEL: Poinformuj szefowa o wygranej walce"),uczen1.kill(),e.quotes.flags.mariaDefeated=!0,e.weapons.jedynka=weapons.jedynka,repeating.addLowerText("Dostales bron: Jedynka trygonometryczna!"),localStorage.setObject(saveName,e)})})}},ANG={preload:function(){game.load.image("sala106","assets/sala106.png"),game.load.tilemap("sal106","assets/sala106.csv")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("sal106","sala106",0,12),map.setTileLocationCallback(8,11,1,1,function(){betweenMapChange="fromANG",game.state.start("FFR")},game),"fromFFR"==betweenMapChange?(repeating.loadPlayer(540,643),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+e.objective,{
fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){})}},WIAI={preload:function(){game.load.image("sala204","assets/sala204.png"),game.load.tilemap("sal204","assets/sala204.csv")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("sal204","sala204",0,11),map.setTileLocationCallback(0,5,1,1,function(){betweenMapChange="fromWIAI",game.state.start("SF")},game),"fromSF"==betweenMapChange?(repeating.loadPlayer(112,352),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){})}},HIS={preload:function(){game.load.image("sala103","assets/sala103.png"),game.load.tilemap("sal103","assets/sala103.csv")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("sal103","sala103",0,12),map.setTileLocationCallback(4,0,1,1,function(){betweenMapChange="fromHIS",game.state.start("FFL")},game),"fromFFL"==betweenMapChange?(repeating.loadPlayer(287,130),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){})}},MIETEK={preload:function(){game.load.image("sala001","assets/sala001.png"),game.load.tilemap("sal001","assets/sala001.csv")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("sal001","sala001",0,13),map.setTileLocationCallback(11,3,1,1,function(){betweenMapChange="fromMIETEK",game.state.start("GF")},game),"fromGF"==betweenMapChange?(repeating.loadPlayer(644,217),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){})}},ECDL={preload:function(){game.load.image("ECDL","assets/ecdl.png"),game.load.tilemap("salaECDL","assets/ecdl.csv")},create:function(){var e=localStorage.getObject(saveName);repeating.loadMap("salaECDL","ECDL",0,13),map.setTileLocationCallback(0,2,1,1,function(){betweenMapChange="fromECDL",game.state.start("GF")},game),"fromGF"==betweenMapChange?(repeating.loadPlayer(119,163),betweenMapChange=!1):repeating.loadPlayer(e.positionX,e.positionY),controls=new repeating.controls,fpsText=game.add.text(20,30,"CEL: "+e.objective,{fill:"#FFFFFF",font:"18px 'Press Start 2P' "}),fpsText.stroke="#000000",fpsText.strokeThickness=6,fpsText.fixedToCamera=!0,repeating.addLowerText("Tu w przyszlosci powstanie zadanie z ECDL!")},update:function(){repeating.updateSaves(),repeating.checkControls(),game.physics.arcade.collide(player,layer,function(){})}},game=new Phaser.Game(1280,800,Phaser.CANVAS,"elektrykrpg");game.state.add("Boot",Boot),game.state.add("Preloader",Preloader),game.state.add("MainMenu",MainMenu),game.state.add("Level1",Level1),game.state.add("FFR",FFR),game.state.add("FFL",FFL),game.state.add("SF",SF),game.state.add("GF",GF),game.state.add("outsideElektryk",outsideElektryk),game.state.add("city1",city1),game.state.add("city2",city2),game.state.add("hayati",hayati),game.state.add("bodrum",bodrum),game.state.add("POL",POL),game.state.add("MAT",MAT),game.state.add("ANG",ANG),game.state.add("WIAI",WIAI),game.state.add("HIS",HIS),game.state.add("MIETEK",MIETEK),game.state.add("ECDL",ECDL),game.state.start("Boot");
}());
